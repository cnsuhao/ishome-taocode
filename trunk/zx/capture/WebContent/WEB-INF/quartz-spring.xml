<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xmlns:task="http://www.springframework.org/schema/task" xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
   		http://www.springframework.org/schema/beans 
   		http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
   		http://www.springframework.org/schema/tx 
   		http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
   		http://www.springframework.org/schema/aop 
   		http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
   		http://www.springframework.org/schema/context
   		http://www.springframework.org/schema/context/spring-context-4.0.xsd 
 		http://www.springframework.org/schema/task 
		http://www.springframework.org/schema/task/spring-task-4.0.xsd
		http://www.springframework.org/schema/util 
		http://www.springframework.org/schema/util/spring-util-4.0.xsd">

	<!-- 异步调用 -->
	<bean id="asyncService" class="com.zxlh.comm.async.service.impl.AsyncServiceImpl" />

	<bean id="objectMapper" class="com.upg.zx.domain.capture.bean.ObjectMapperFactoryBean" />

	<bean id="tokenRegistry"
		class="com.upg.zx.domain.capture.token.imp.DefaultTokenRegistry"></bean>

	<bean id="tokenFactory" class="com.upg.zx.domain.capture.token.imp.TokenFactory">
		<property name="timeOut" value="120000" />
	</bean>

	<!-- 抓取类配置 -->
	<bean id="capture" class="com.upg.zx.domain.capture.imp.CaptureImp">
		<property name="captureServices">
			<list>
				<bean class="com.upg.zx.domain.capture.service.imp.SangHaiCaptureService">
					<property name="areaCode" value="310000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="condition.keyword" />
					<property name="authCodeParam" value="captcha" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.ZhejiangCaptureService">
					<property name="areaCode" value="330000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="name" />
					<property name="authCodeParam" value="verifyCode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.JianShuCaptureService">
					<property name="areaCode" value="320000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="name" />
					<property name="authCodeParam" value="verifyCode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
					<property name="objectMapper">
						<ref bean="objectMapper" />
					</property>
				</bean>

				<bean
					class="com.upg.zx.domain.capture.service.imp.ShangDongCaptureService">
					<property name="areaCode" value="370000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="kw" />
					<property name="authCodeParam" value="secode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.AnHuiCaptureService">
					<property name="areaCode" value="340000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.JianXi2CaptureService">
					<property name="areaCode" value="360000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="selectValue" />
					<property name="authCodeParam" value="password" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.FuJianCaptureService">
					<property name="areaCode" value="350000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="condition.keyword" />
					<property name="authCodeParam" value="captcha" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean
					class="com.upg.zx.domain.capture.service.imp.GuangDongCaptureService">
					<property name="areaCode" value="440000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="textfield" />
					<property name="authCodeParam" value="code" />
					<property name="objectMapper">
						<ref bean="objectMapper" />
					</property>
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean class="com.upg.zx.domain.capture.service.imp.GuangXiCaptureService">
					<property name="areaCode" value="450000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.HuNanCaptureService">
					<property name="areaCode" value="430000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="condition.keyword" />
					<property name="authCodeParam" value="captcha" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.HuBeiCaptureService">
					<property name="areaCode" value="420000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.HeNanCaptureService">
					<property name="areaCode" value="410000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.HaiNanCaptureService">
					<property name="areaCode" value="460000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="textfield" />
					<property name="authCodeParam" value="code" />
					<property name="objectMapper">
						<ref bean="objectMapper" />
					</property>
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.XinJiangCaptureService">
					<property name="areaCode" value="650000" />
					<property name="encode" value="GBK" />
					<property name="companyNameParam" value="maent.entname" />
					<property name="authCodeParam" value="yzm" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean class="com.upg.zx.domain.capture.service.imp.ShanXiCaptureService">
					<property name="areaCode" value="610000" />
					<property name="encode" value="GBK" />
					<property name="companyNameParam" value="maent.entname" />
					<property name="authCodeParam" value="yzm" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean class="com.upg.zx.domain.capture.service.imp.SiChuanCaptureService">
					<property name="areaCode" value="510000" />
					<property name="encode" value="GBK" />
					<property name="companyNameParam" value="maent.entname" />
					<property name="authCodeParam" value="yzm" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean
					class="com.upg.zx.domain.capture.service.imp.HeiLongJiangCaptureService">
					<property name="areaCode" value="230000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.LiaoNingCaptureService">
					<property name="areaCode" value="210000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="solrCondition" />
					<property name="authCodeParam" value="authCode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean
					class="com.upg.zx.domain.capture.service.imp.NeiMengGuCaptureService">
					<property name="areaCode" value="150000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="textfield" />
					<property name="authCodeParam" value="code" />
					<property name="objectMapper">
						<ref bean="objectMapper" />
					</property>
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean
					class="com.upg.zx.domain.capture.service.imp.ChongQingCaptureService">
					<property name="areaCode" value="500000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="key" />
					<property name="authCodeParam" value="code" />
					<property name="objectMapper">
						<ref bean="objectMapper" />
					</property>
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.YunNanCaptureService">
					<property name="areaCode" value="530000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="condition.keyword" />
					<property name="authCodeParam" value="captcha" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean class="com.upg.zx.domain.capture.service.imp.XiZangCaptureService">
					<property name="areaCode" value="540000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>


				<bean class="com.upg.zx.domain.capture.service.imp.GanSuCaptureService">
					<property name="areaCode" value="620000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="queryVal" />
					<property name="authCodeParam" value="authCodeQuery" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>
				<bean class="com.upg.zx.domain.capture.service.imp.QingHaiCaptureService">
					<property name="areaCode" value="630000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="entName" />
					<property name="authCodeParam" value="checkNo" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>



				<bean class="com.upg.zx.domain.capture.service.imp.HebeiCaptureService">
					<property value="130000" name="areaCode" />
					<property value="UTF-8" name="encode" />
					<property value="condition.keyword" name="companyNameParam" />
					<property value="captcha" name="authCodeParam" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>


				<bean class="com.upg.zx.domain.capture.service.imp.SanxiCaptureService">
					<property value="140000" name="areaCode" />
					<property value="UTF-8" name="encode" />
					<property value="entName" name="companyNameParam" />
					<property value="checkNo" name="authCodeParam" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.TianJinCaptureService">
					<property name="areaCode" value="120000" />
					<property name="encode" value="utf-8" />
					<property name="companyNameParam" value="searchContent" />
					<property name="authCodeParam" value="vcode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

				<bean class="com.upg.zx.domain.capture.service.imp.NingXiaCaptureService">
					<property name="areaCode" value="640000" />
					<property name="encode" value="UTF-8" />
					<property name="companyNameParam" value="selectValue" />
					<property name="authCodeParam" value="password" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>


				<bean class="com.upg.zx.domain.capture.service.imp.BeiJingCaptureService">
					<property name="areaCode" value="110000" />
					<property name="encode" value="utf-8" />
					<property name="companyNameParam" value="keyword" />
					<property name="authCodeParam" value="checkcode" />
					<property name="tokenFactory">
						<ref bean="tokenFactory" />
					</property>
					<property name="tokenRegistry">
						<ref bean="tokenRegistry" />
					</property>
				</bean>

			</list>
		</property>

		<property name="asyncService">
			<ref bean="asyncService" />
		</property>
		<property name="urlParser">
			<ref bean="urlParser" />
		</property>

		<property name="serviceConfig" ref="serviceConfig" />

	</bean>

	<!-- 172.16.2.214:80 -->
	<bean id='serviceConfig' class='com.upg.zx.capture.bean.ServiceConfig'>
		<property name='serviceConfig'>
			<map>
				<entry key='requestUrl' value='http://127.0.0.1:8888/corp/request/allinfo' />
				<entry key='analysisTemplateUrl'
					value='http://127.0.0.1:8888/corp/request/queryanalysisTemplate' />

				<entry key='postOtherInfoJsUrl'
					value='http://127.0.0.1:8888/corp/uploadCompanyHtmljs' />
				<entry key='postOtherInfoUrl'
					value='http://127.0.0.1:8888/corp/uploadCompanyHtml' />

				<entry key='submitCompanyUrl'
					value='http://127.0.0.1:8888/corp/uploadCompanyHtml' />
				<entry key='submitCompanyls'
					value='http://127.0.0.1:8888/corp/uploadCompanyListHtml' />
				<entry key='getLianziCompanyUrl' value='http://127.0.0.1:8888/corp/sendIpDistant' />

				<entry key='getCompanyUrl'
					value='http://127.0.0.1:8888/corp/info/update/sedCompany' />

				<entry key='corpNameUrl' value='http://127.0.0.1:8888/corp/getKeyWord' />

				<entry key='keyWordUrl' value='http://testcapture153.wzyrz.cn/key/newWord' />
				<entry key='submitCourtDocUrl'
					value='http://testcapture153.wzyrz.cn/codc/uploadCompanyListHtml' />

				<entry key='useProxy' value='http://127.0.0.1:8888/proxy/newProtool' />
			</map>
		</property>
	</bean>

	<!-- 获取请求以及头信息 -->
	<bean id="requestLoad" class="com.upg.zx.domain.capture.imp.RequestLoad"
		init-method="init">
		<property name="serviceConfig" ref="serviceConfig" />
	</bean>

	<bean id="corpSearchName" class="com.upg.zx.capture.util.CorpSearchName"
		init-method="init">
		<property name="serviceConfig" ref="serviceConfig" />
	</bean>

	<bean id="companyTask" class="com.upg.zx.capture.task.CompanyTask"
		init-method="init">

		<property name="corpSearchName" ref="corpSearchName" />

		<property name="serviceConfig" ref="serviceConfig" />

		<property name="capture">
			<ref bean="capture" />
		</property>
		<property name="asyncService">
			<ref bean="asyncService" />
		</property>
		<property name="userId" value="Fucy" />
	</bean>

	<bean id="corbBaseTask" class="com.upg.zx.capture.task.CorbBaseTask">

		<property name="serviceConfig" ref="serviceConfig" />

		<property name="cache">
			<ref bean="myCache" />
		</property>

		<property name="capture">
			<ref bean="capture" />
		</property>

		<property name="yzmCapture">
			<ref bean="yzmCapture" />
		</property>

		<property name="forCodeFaild" value="1" />

		<property name="asyncService">
			<ref bean="asyncService" />
		</property>
	</bean>

	<bean id="yzmCapture" class="com.upg.zx.capture.client.YzmCapture">
		<property name="cache">
			<ref bean="myCache" />
		</property>

		<property name="count" value="2" />

	</bean>
	<bean id="tokenclear" class="com.upg.zx.domain.capture.token.imp.DefaultTockenClean">
		<property name="tokenRegistry">
			<ref bean="tokenRegistry" />
		</property>
	</bean>

	<bean id="urlParser" class="com.upg.zx.parser.URLParserJSON" />

	<task:scheduled-tasks>
		<!-- ////////////////////////////////离线异步静态抓取//////////////////////////////////// -->
		<!-- 获取公司详细信息 -->
		<task:scheduled ref="companyTask" method="getInfoTask"
			cron="0/5 * * * * ?" />

		<!-- 公司自动打 -->
		<task:scheduled ref="companyTask" method="getListTask"
			cron="0/5 * * * * ?" />
			
		<!-- ////////////////////////////////离线异步静态抓取//////////////////////////////////// -->
		<!-- 人工打码 -->
	   <task:scheduled ref="corbBaseTask"
			method="forCodeCompanyByArtificialHtmlToUpload" cron="0/5 * * * * ?" />

		<task:scheduled ref="tokenclear" method="clean"
			cron="0/30  * * * * ?" />

	</task:scheduled-tasks>
</beans>
