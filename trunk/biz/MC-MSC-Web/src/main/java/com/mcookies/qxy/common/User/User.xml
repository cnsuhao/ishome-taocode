<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE mapper
    PUBLIC '-//mybatis.org//DTD Dao 3.0//EN' 
    'http://mybatis.org/dtd/mybatis-3-mapper.dtd' >
<!-- 用户表 -->
<!-- 需要和DAO保持完全路径一致 -->
<mapper namespace='com.mcookies.qxy.common.User.UserDao'>
	<!-- 表字段信息 -->
	<sql id='tableColumns'>
		uid,account,email,email_status,phone,password,status,create_time,creator,update_time,updator
	</sql>

	<!-- 根据条件更新所有记录 -->
	<update id='doUpdateAll' parameterType='UserDBO'>
		UPDATE user SET update_time = #{updateTime} <!-- 更新时间、更新者 -->
		<if test=" uid != null "><!-- 用户id（自增） -->
			,uid = #{uid}
		</if>
		<if test=" account != null "><!-- 登录账号 -->
			,account = #{account}
		</if>
		<if test=" email != null "><!-- 登录邮箱 -->
			,email = #{email}
		</if>
		<if test=" emailStatus != null "><!-- 邮箱是否验证 -->
			,email_status = #{emailStatus}
		</if>
		<if test=" phone != null "><!-- 手机号 -->
			,phone = #{phone}
		</if>
		<if test=" password != null "><!-- 密码 -->
			,password = #{password}
		</if>
		<if test=" status != null "><!-- 状态（不启用） -->
			,status = #{status}
		</if>
		<if test=" createTime != null "><!-- 创建时间 -->
			,create_time = #{createTime}
		</if>
		<if test=" creator != null "><!-- 创建者 -->
			,creator = #{creator}
		</if>
		<if test=" updator != null "><!-- 最后更新者 -->
			,updator = #{updator}
		</if>
		WHERE 1 = 1
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
		<if test=" account != null "><!-- 登录账号 -->
			AND account = #{account}
		</if>
		<if test=" email != null "><!-- 登录邮箱 -->
			AND email = #{email}
		</if>
		<if test=" emailStatus != null "><!-- 邮箱是否验证 -->
			AND email_status = #{emailStatus}
		</if>
		<if test=" phone != null "><!-- 手机号 -->
			AND phone = #{phone}
		</if>
		<if test=" password != null "><!-- 密码 -->
			AND password = #{password}
		</if>
		<if test=" status != null "><!-- 状态（不启用） -->
			AND status = #{status}
		</if>
		<if test=" createTime != null "><!-- 创建时间 -->
			AND create_time = #{createTime}
		</if>
		<if test=" creator != null "><!-- 创建者 -->
			AND creator = #{creator}
		</if>
		<if test=" updateTime != null "><!-- 更新时间 -->
			AND update_time = #{updateTime}
		</if>
		<if test=" updator != null "><!-- 最后更新者 -->
			AND updator = #{updator}
		</if>
	</update>
	<!-- 查询分页数据信息 -->
	<select id='doSelectPage' parameterType='UserDBO' resultType='UserDBO'>
		SELECT
		<include refid='tableColumns' />
		FROM user
		WHERE 1 = 1
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
		<if test=" account != null "><!-- 登录账号 -->
			AND account = #{account}
		</if>
		<if test=" email != null "><!-- 登录邮箱 -->
			AND email = #{email}
		</if>
		<if test=" emailStatus != null "><!-- 邮箱是否验证 -->
			AND email_status = #{emailStatus}
		</if>
		<if test=" phone != null "><!-- 手机号 -->
			AND phone = #{phone}
		</if>
		<if test=" password != null "><!-- 密码 -->
			AND password = #{password}
		</if>
		<if test=" status != null "><!-- 状态（不启用） -->
			AND status = #{status}
		</if>
		<if test=" createTime != null "><!-- 创建时间 -->
			AND create_time = #{createTime}
		</if>
		<if test=" creator != null "><!-- 创建者 -->
			AND creator = #{creator}
		</if>
		<if test=" updateTime != null "><!-- 更新时间 -->
			AND update_time = #{updateTime}
		</if>
		<if test=" updator != null "><!-- 最后更新者 -->
			AND updator = #{updator}
		</if>
	</select>

	<!-- 插入一条数据 -->
	<insert id='doInsert' parameterType='UserDBO'>
		INSERT INTO user
		(
		<include refid='tableColumns' />
		)
		VALUES
		(
		#{uid},#{account},#{email},#{emailStatus},#{phone},#{password},#{status},#{createTime},#{creator},#{updateTime},#{updator}
		)
	</insert>
	<!-- 修改一条数据 -->
	<update id='doUpdate' parameterType='UserDBO'>
		UPDATE user SET update_time = #{updateTime} <!-- 更新时间、更新者 -->
		<if test=" uid != null "><!-- 用户id（自增） -->
			,uid = #{uid}
		</if>
		<if test=" account != null "><!-- 登录账号 -->
			,account = #{account}
		</if>
		<if test=" email != null "><!-- 登录邮箱 -->
			,email = #{email}
		</if>
		<if test=" emailStatus != null "><!-- 邮箱是否验证 -->
			,email_status = #{emailStatus}
		</if>
		<if test=" phone != null "><!-- 手机号 -->
			,phone = #{phone}
		</if>
		<if test=" password != null "><!-- 密码 -->
			,password = #{password}
		</if>
		<if test=" status != null "><!-- 状态（不启用） -->
			,status = #{status}
		</if>
		<if test=" createTime != null "><!-- 创建时间 -->
			,create_time = #{createTime}
		</if>
		<if test=" creator != null "><!-- 创建者 -->
			,creator = #{creator}
		</if>
		<if test=" updator != null "><!-- 最后更新者 -->
			,updator = #{updator}
		</if>
		WHERE 1 = 1
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
	</update>
	<!-- 逻辑删除一条数据 -->
	<delete id='toDelete' parameterType='UserDBO'>
		UPDATE user SET ddd='1', update_time = #{updateTime}, uu2 = #{uu2}
		WHERE update_time = #{updateTime}
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
	</delete>
	<!-- 物理删除一条数据 -->
	<delete id='doDelete' parameterType='UserDBO'>
		DELETE FROM user WHERE update_time = #{updateTime}
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
	</delete>
	<!-- 查询一条数据 -->
	<select id='doRead' parameterType='UserDBO' resultType='UserDBO'>
		SELECT
		<include refid='tableColumns' />
		FROM user WHERE 1 = 1
		<if test=" uid != null "><!-- 用户id（自增） -->
			AND uid = #{uid}
		</if>
	</select>

</mapper>
