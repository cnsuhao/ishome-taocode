## 11 作业管理
@(交接)

> 标签： 接口 系统设置

---

### 文档更新说明
> 更新时间：2016-09-22

### 页面说明
>作业管理功能包括以下页面：作业列表查询、作业搜索、作业新增、详情查看、作业置顶、作业删除等。

>声明开发测试时前端需要在url上加上test=true参数，标示为测试接口，接口会返回静态数据以提供给前端调试页面使用，前端需要使用测试接口完成数据渲染工作后，等到正式接口开发完成后，才能调用正式接口；

###11.1 作业管理
####11.1.1-1  作业列表查询接口
> 作业列表查询，需要输入termId、cid、page、size，按时间排列

> 需要使用Token验证查询者身份


``` json
Url:        /qxy/task/class?termId=[termId]&cid=[cid]&page=[page]&size=[size]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 'termId'：   termId＝0，或者为空，为默认学期
    - `cid`:班级id
    - `page` 不传默认为1
    - `size` 不传默认为12
    - `token` ：      token
Response:
    - `status`：0->OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    -  `count`:数据总数
    -  'page': 当前页数，不传或等于0  默认等于1
    -  'size': 每页显示数据量，不传或为0时一页返回12条数据
    -  'tasklist':作业列表
    -  'taskId': 作业id
    -  `taskName`: 作业标题
    -  `isTop`:是否置顶  0 不置顶 1置顶
    -  `author`:发布人
    -  'courseId':课程栏目id
    -  `courseName`: 作业栏目
    -  `publishTime`:作业发布时间
```
> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"3",
        "page":"3",
        "size":"12",
        "tasklist": [
            {
                "taskId":"1",
                "taskName": "写一篇500论点描述",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"2",
                "taskName": "写一篇500论点描述2",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "1",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"3",
                "taskName": "写一篇500论点描述3",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            }
        ]
    }
}
```
####11.1.1-1  作业列表查询接口
> 作业列表查询，需要输入termId、tid、page、size，按时间排列

> 需要使用Token验证查询者身份


``` json
Url:        /qxy/task/teacher?termId=[termId]&tid=[cid]&page=[page]&size=[size]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 'termId'：   termId＝0，或者为空，为默认学期
    - `tid`:教师id
    - `page` 不传默认为1
    - `size` 不传默认为12
    - `token` ：      token
Response:
    - `status`：0->OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    -  `count`:数据总数
    -  'page': 当前页数，不传或等于0  默认等于1
    -  'size': 每页显示数据量，不传或为0时一页返回12条数据
    -  'tasklist':作业列表
    -  'taskId': 作业id
    -  `taskName`: 作业标题
    -  `isTop`:是否置顶  0 不置顶 1置顶
    -  `author`:发布人
    -  'courseId':课程栏目id
    -  `courseName`: 作业栏目
    -  `publishTime`:作业发布时间
```
> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"3",
        "page":"3",
        "size":"12",
        "tasklist": [
            {
                "taskId":"1",
                "taskName": "写一篇500论点描述",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"2",
                "taskName": "写一篇500论点描述2",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "1",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"3",
                "taskName": "写一篇500论点描述3",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            }
        ]
    }
}
```
####11.1.2 作业详情查看接口
>作业详情查看，需要输入taskId

> 需要使用Token验证查询者身份

``` json
Url:        /qxy/task/info?taskId=[taskId]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `taskId`:    作业id --必填项
    - `token` ：      token
Response:
    - `status`：0->OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    -  `taskId`: 作业id
    -  `taskName`: 作业标题
    -  'content' :  作业说明
    -  `video`： 作业音频
    -  `pic`： 作业图片数组
    -  `courseName`: 作业栏目
    -  `content` 作业内容
    -  `author`:发布人
    -  `publishTime`:作业发布时间
    -  `startTime`:作业开始时间
    -  `endTime`:作业结束时间
    -  'isTop':是否置顶
```
> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "taskId": "1",
        "taskName": "写一篇500论点描述",
        "content": "论秦始皇功大于过.....",
        "video": "url",
        "pic": "url1,url2",
        "courseId": "1",
        "courseName": "语文",
        "taskClasser":"13,15,16",
        "author":"吴老师",
        "publishTime":"2019-09-22 16:20:30",
        "startTime":"2019-09-22 16:20:30",
        "endTime":"2019-09-22 16:20:30",
        "isTop": "1"
    }
}
```
####11.1.3  作业（按名称）搜索接口
> 作业搜索接口，需要输入courseId、taskName，参数为可选，需要根据token中的sid来查询作业

> 需要使用Token验证查询者身份

``` json
Url:        /qxy/task/search?courseId=[courseId]&taskName=[taskName]&page=[page]&size=[size]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 'courseId'：   作业栏目 
    - `taskName`:    作业标题
    - 'page'：       分页参数，不传或为0时返回第一页 
    - `size`:        每页显示数据量，不传或为0时一页返回12条数据
Response:
    - `status`：0->OK 
                1->token is invalid
                2->token is timeout
                3->Illegal interface calls, not power use interface
    -  `count`:数据总数
    -  'page': 当前页数，不传或等于0  默认等于1
    -  'size': 每页显示数据量，不传或为0时一页返回12条数据
    -  'tasklist':作业列表
    -  'taskId': 作业id
    -  `taskName`: 作业标题
    -  `isTop`:是否置顶  0 不置顶 1置顶
    -  `author`:发布人
    -  'courseId':课程栏目id
    -  `courseName`: 作业栏目
    -  `publishTime`:作业发布时间
```
> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"3",
        "page":"3",
        "size":"3",
        "count":"15",
        "tasklist": [
            {
                "taskId":"1",
                "taskName": "写一篇500论点描述",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"2",
                "taskName": "写一篇500论点描述2",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "1",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            },
            {
                "taskId":"3",
                "taskName": "写一篇500论点描述3",
                "isTop":"0",
                "author":"吴老师",
                "courseId": "2",
                "courseName": "语文",
                "publishTime":"2019-09-22 16:20:30"
            }
        ]
    }
}
```
####11.1.4  作业新增接口
>作业新增，需要输入作业对象
>新增作业时需要接口获取token中用户的sid并写入作业表
> 需要使用Token验证查询者身份
``` json
Url:        /qxy/task?token=[token]
Method:     POST
Header:     Content-type:application/json
Parameter:
   -  `taskName`: 作业标题
    -  'content' :  作业说明
    -  `video`： 作业音频
    -  `pic`： 作业图片数组
    -  `courseName`: 作业栏目
    -  `content` 作业内容
    -  `author`:发布人
    -  `publishTime`:作业发布时间
    -  `startTime`:作业开始时间
    -  `endTime`:作业结束时间
    -  'isTop':是否置顶
示例：
 {
        "taskName": "写一篇500论点描述",
        "content": "论秦始皇功大于过.....",
        "video": "url",
        "pic": [url1,url2],
        "courseId": "1",
        "taskClasser":"13,15,16",
        "author":"吴老师",
        "publishTime":"2019-09-22 16:20:30",
        "startTime":"2019-09-22 16:20:30",
        "endTime":"2019-09-22 16:20:30",
        "isTop": "1"
}
Response:
    - `status`: 0->OK
                1-> 新增失败
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": "0",
    "data":{
        "info":"ok"
    }
}
```

####11.1.5  作业置顶/取消接口
> 作业置顶，需要输入taskId、isTop为1时置顶，isTop为0时取消置顶

> 需要使用Token验证查询者身份

``` json
Url:        /qxy/task/set?token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    -  `taskId`: 作业id数组
    -  `isTop` :isTop为1时置顶，isTop为0时取消置顶
  
示例：
{
    "taskId": "1",
    "isTop" :"1",
}
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": "0",
    "data":{
        "info":"ok"
    }
}
```

####11.1.6  作业修改接口
> 作业列表修改，需要输入taskid、修改的内容

> 需要使用Token验证查询者身份

``` json
Url:        /qxy/task?token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    -  `taskId`: 作业id
    -  `taskName`: 作业标题
    -  'content' :  作业说明
    -  `video`： 作业音频
    -  `pic`： 作业图片数组
    -  `courseName`: 作业栏目
    -  `content` 作业内容
    -  `author`:发布人
    -  `publishTime`:作业发布时间
    -  `startTime`:作业开始时间
    -  `endTime`:作业结束时间
    -  'isTop':是否置顶
示例：
{
    "taskId": "1",
    "taskName": "写一篇500论点描述",
    "content": "论秦始皇功大于过.....",
    "video": "url",
    "pic":"url1,url2",
    "courseId": "1",
    "courseName": "语文",
    "taskClasser":"13,15,16",
    "author":"吴老师",
    "publishTime":"2019-09-22 16:20:30",
    "startTime":"2019-09-22 16:20:30",
    "endTime":"2019-09-22 16:20:30",
    "isTop": "1"    
}
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": "0",
    "data":{
        "info":"ok"
    }
}
```
####11.1.7  作业删除接口
>作业删除，需要输入taskId

> 需要使用Token验证查询者身份

``` json
Url:        /qxy/task?token=[token]
Method:     DELETE
Header:     Content-type:application/json
Parameter:
    -  `taskId`: 作业id
  
示例：
{
    "taskId": "1",
}
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": "0",
    "data":{
        "info":"ok"
    }
}
```
####11.1.8  学期班级年级查询接口
>引用9.3.1

####11.1.9  课程查询接口
>引用9.2.1

####11.1.10  选择班级接口
>引用1.2.1

####11.1.10  图片上传接口
>引用2.1.6