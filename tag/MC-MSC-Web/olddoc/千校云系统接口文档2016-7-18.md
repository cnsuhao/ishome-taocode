
[TOC]


##千校云Token方案说明

@(交接)


标签（空格分隔）： 接口 Token 说明

---

### 1.1文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2 Token方案总体说明
#### 2.1 Token方案的基本功能
    Token方案主要的功能是为了保证接口安全有效的运行，防止恶意程序对接口的大并发刷新。Token接口从设计上说具备以下主要功能：
1. 用户身份确认：通过token认证，确认用户是系统的合法用户。
2. 用户权限确认：通过token认证，确认用户是否具备访问本接口的权力。未来通过token的身份识别来判断用户界面上能使用哪些功能菜单。
3. 用户身份变换：通过token查询接口，为后台的其他接口提供token对应的用户身份tid，uid，type（教师还是家长），sid，以及家长对应的学生student_id和班级cid等基本信息
4. 用户登录认证：通过登录接口（通过使用username和password登录。或者通过openid登录）验证用户是否能正常登录。返回用户的持久token

#### 2.2 Token方案接口的组成
    token方案的接口由三部分组成，分别是token刷新接口，token验证接口，登录接口
- token刷新接口包括：token刷新接口
- token验证接口包括：token验证接口，token状态查询接口
- 登录接口包括：用户名密码登录接口，OpenID登录接口

#### 2.3 Token方案的数据结构
    token方案的数据结构包括两部分，数据库部分和redis部分。
    数据库部分包括，用户表，用户教师表，用户家长表，用户学生表，学生班级表等
    Redis部分包括token信息表，用户持久token表，以及当前token表
    Redis的KV结构如下：
    
表一：用户token信息表

Key | Value | 生命期 | 说明
---|---|---|---
base64(uid+type+sid) | authorizer_refresh_token | 无（有数据表示登录过） | 接口调用凭据刷新令牌（在登录的用户具备API权限时，才有此返回值），刷新令牌主要用于第三方平台获取和刷新已授权用户的access_token，只会在登录成果时提供，请妥善保存。 一旦丢失，只能让用户重新登录权，才能再次拿到新的刷新令牌

表二：用户当前token表

Key | Value | 生命期 | 说明
---|---|---|---
authorizer_refresh_token | authorizer_access_token | 半年（暂定） |  凭刷新令牌（在登录的用户具备API权限时，才有此返回值），查询当前有效的access token

表三：用户当前token表

Key | Value | 生命期 | 说明
---|---|---|---
authorizer_access_token | json | 7200秒 |  当前有效的access token，查询用户的基本信息

``` json
表三的json格式如下：
{
    "uid":"1234",
    "sid":"2122",
    "type":"0",   #0-教师；1-学生家长
    "teacher":{
        "tid":"212",
        "tname":"张老师"
        "privile":""
    },
    "parent":{
        "pid":"221",
        "pname":"",
        "student_id":"2321",
        "student_name":"xxxx",
        "cid":"213"
    }
｝
```


#### 2.4 Token方案的实现
-  token系统采用类似微信第三方开发平台的双token模式，即authorizer_refresh_token（授权方的刷新令牌，刷新令牌主要用于“接口调用凭据”的获取和刷新）authorizer_access_token（接口调用凭据）。authorizer_refresh_token由客户端长期保存较长期限有效（暂定半年过期），authorizer_access_token失效的方式为退出登录时注销。重新登录的时候新生成authorizer_access_token。
- authorizer_access_token可以用来查询用户是否登录过，也可以用来刷新authorizer_access_token。authorizer_access_token是系统使用中的“接口调用凭据”，通过该authorizer_access_token前端才能调用后台的功能接口。authorizer_access_token有生存期，每次刷新后7200秒过期。
- 当authorizer_access_token过期失效后（也可在快失效前由前端主动调用刷新接口），前端需要用authorizer_refresh_token调用刷新接口重新获得有效的authorizer_access_token。
- authorizer_access_token在每个接口调用中都会传到服务器进行效验，过期失效的话会在接口中返回失效状态。
- 前端应该缓存authorizer_access_token的生存周期。当authorizer_access_token的有效时间快到的时候，前端应主动刷新authorizer_access_token。
- 用户登录时需要传的参数包括：sid，家长or教师，用户名和密码或者是open_id。
- redis中表三的每条记录都有过期时间，到了时间该记录会自动删除。提前刷新的话可以由接口获取的authorizer_refresh_token在的redis中表二中找到当前的使用的authorizer_access_token显式删除表三中的对应数据，然后重新插入新authorizer_access_token。
- redis中表二有一定生命周期，比如半年一年。当表二中的数据被清除后，用户的authorizer_refresh_token也随之失效，用户将不可能通过使用authorizer_refresh_token来获取新的authorizer_access_token，也就无法再使用系统，也就是说半年之后必须重新登录。这样表二是不会有冗余数据的，随着时间冗余数据也会被清除。
- 当用户登陆的时候，首先会检查redis表一中有没有对应的数据。没有对应的数据，表明是首次使用，直接创建authorizer_refresh_token并返回即可，并同时创建表二数据，表二数据的生命周期为半年（暂定），同时authorizer_access_token内容为空，等待用户调用接口生成该数据。如果已经有对应的数据，取出authorizer_refresh_token（说明该用户已经登录过系统）并检查表二，表二中也有数据说明用户是重复登录，直接返回持久authorizer_refresh_token，并对表二的生命期延长到半年。
- 如Redis表二中没有对应的数据。说明用户已经超过半年或者一年没有登录过系统。那么重新生成一个authorizer_refresh_token，修改表一中的authorizer_refresh_token记录。并重新插入到表二中，设置表二的生命周期为半年，同时返回新的authorizer_refresh_token即可。
    
### 3. Token方案接口说明
#### 3.1 token刷新接口
> token刷新接口接口返回了当前的authorizer_access_token，该API用于在授权方令牌（authorizer_access_token）失效时，可用刷新令牌（authorizer_refresh_token）获取新的令牌。请注意，此处token是2小时刷新一次，开发者需要自行进行token的缓存。

``` json
Url:        /qxy/component/token=[authorizer_refresh_token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - token  : 登录时返回的authorizer_refresh_token
Response:
    - `status`：0->成功
                1->authorizer_refresh_token无效，需要重新登录
                11->token is invalid
                12->token is timeout
    - 'authorizer_access_token':  接口调用时使用的authorizer_access_token
    - 'expires_in':   有效时间
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "authorizer_access_token":"aaUl5s6kAByLwgV0BhXNuIFFUqfrR8vTATsoSHukcIGqJgrc4KmMJ-JlKoC_-NKCLBvuU1cWPv4vDcLN8Z0pn5I45mpATruU0b51hzeT1f8", 
        "expires_in": 7200
    }
}
```

#### 3.2 token验证接口
> 验证接口通过接口捕捉器统一调用，不再使用单独的验证接口。验证接口返回用户的基本登录信息；

#### 3.3 token状态查询接口
> token刷新接口接口返回了当前的authorizer_access_token，该API用于在授权方令牌（authorizer_access_token）失效时，可用刷新令牌（authorizer_refresh_token）获取新的令牌。请注意，此处token是2小时刷新一次，开发者需要自行进行token的缓存。

``` json
Url:        /qxy/component_info/token=[authorizer_access_token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - token  : 当前有效的authorizer_access_token
Response:
    - `status`：0->成功
                1->authorizer_access_token，需要重新刷新
                11->token is invalid
                12->token is timeout
    - 'teacher':  token对应的教师基本信息（如果是教师正常登录的话）
    - 'parent':   token对应的家长基本信息（如果是家长正常登录的话）
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "uid":"1234",
        "sid":"2122",
        "type":"0",   #0-教师；1-学生家长
        "teacher":{
            "tid":"212",
            "tname":"张老师"
            "privile":""
        },
        "parent":{
            "pid":"221",
            "pname":"",
            "student_id":"2321",
            "student_name":"xxxx",
            "cid":"213"
        }
    }
}
```

#### 3.4 用户名密码登录接口


#### 3.5 OpenID登录接口



## 一、手机端访问接口调用说明（包括教师后台接口）

@(交接)

>标签：接口\手机端接口

---
### 1.文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 接口调用说明
 > 手机端分为教师查询端及家长查询端，本接口主要为该两部分提供内容，同时兼顾教师后台页面的部分功能。本接口分为三个部分，分别为：新闻管理接口部分，通讯录查询部分（补充后台教师管理部分缺少的功能），以及值日值周查询一个学期（阶段）内，哪些日期有特定老师的值日值周安排和值日值周查每天哪几个老师轮值（好像已经有了）的接口；
 
 > 新闻CMS接口部分的主要功能是实现新闻的展示，特定栏目的展示，特定新闻的查询，以及栏目使用的图片轮播模式；

 > 通讯录部分主要加入了教师查询其任课班级，以及班级查询对应的任课老师，和班级下面的家长列表查询；
 
 > 值日值周部分主要加入按照时间阶段返回那一日有特定教师的值日信息，值周信息。课表部分需要加入类似的按照时间阶段返回那一日有特定教师的上课信息接口。（按天或者按周查询对应的值日和值周安排可以通过工作管理页面的值日值周查询页面完成）；

### 3. 新闻展示接口部分
#### 3.1 栏目查询接口
> 与新闻管理页面的栏目管理页面列表接口一致，会返回全部数据（包括停用数据），考虑是否需要重新做以一个只显示有效栏目数据的接口？

> 新闻栏目查询接口返回了当前的新闻栏目列表，栏目数量不会很多，不考虑分页

> [新闻栏目查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/newscol/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无  : 
Response:
    - `status`：0->成功
                1->无查询栏目权限
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - 'colume':  新闻栏目json
    - 'count':   当前返回新闻栏目条数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"4",
        "colume":[
            {
                "colume_id": "2",
                "title": "学校新闻",
                "auth": "1",   #0-全部用户可读；1-仅教工可读；2-家长及教工可读
                "is_use": "1",   ＃是不是停用；0-正常；1-停用
            },
            {
                "colume_id": "4",
                "title": "教工风采",
                "auth": "1",   #0-全部用户可读；1-仅教工可读；2-家长及教工可读
                "is_use": "0",   ＃是不是停用；0-正常；1-停用
            }
        ]
    }
}
```

#### 3.2 新闻查询接口
> 只显示已发布新闻或者我的新闻或者全部新闻，参考新闻管理页面的新闻列表查询接口，应该是同一个，参数不同而已

> 新闻列表查询接口返回了当前的新闻列表，以时间倒序，显示指定时间内的新闻内容列表供管理员查看（注意：栏目设置为暂停的栏目下的新闻不可见，接口关联查询要加上）

> [新闻列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/newlist/column=[col_id|]&page=[page]&type=[type]&op=[op]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - column: 指定搜索的栏目ID，多个ID用"|"分割，无column参数或参数无效时返回全部数据
    - type:   需要以何种身份查询新闻列表，0-以教师（自己的tid）身份查询新闻列表；1-以管理员（自己的tid）身份查询新闻列表；9-以家长身份（家长pid对应的student_id对应的班级cid）查询新闻列表
    - op:     查询的新闻类型，0-已发布新闻；1-待审核新闻；9-全部新闻
    - page:   page为分页的页面值，当page为空时，返回所有新闻。每个分页返回20条数
Response:
    - `status`：0->成功
                1->无效的栏目id
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - 'news':    新闻数据json
    - 'count':   当前返回新闻数据条数
    - 'page':    新闻数据当前页面编号
    - 'allnum':  全部提交的新闻数据条数
    - 'publish': 全部可见新闻数据条数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "allnum":"70",
        "publish":"68",
        "page":"2",
        "count":"20",
        "news":[
            {
                "news_id": "122",
                "title": "学校建设迈入新阶段",
                "is_audit": "1",   #0-no audit；1-is ok
                "is_top": "1",   ＃是不是置顶0-非置顶；1-置顶
                "is_pic": "1",   ＃是不是包括图片0-不包括；1-包括
                "author": "212",   ＃作者id（tid）
                "author_name": "张俪",   ＃作者名
                "colume_id": "12",   ＃发布栏目id
                "colume_name": "校园风采",   ＃发布栏目名
                "ptime": "2016-06-07"   #发布时间
            },
            {
                "news_id": "122",
                "title": "学校建设迈入新阶段",
                "is_audit": "1",   #0-no audit；1-is ok
                "is_top": "1",   ＃是不是置顶0-非置顶；1-置顶
                "is_pic": "1",   ＃是不是包括图片0-不包括；1-包括
                "author": "212",   ＃作者id（tid）
                "author_name": "张俪",   ＃作者名
                "colume_id": "12",   ＃发布栏目id
                "colume_name": "校园风采",   ＃发布栏目名
                "ptime": "2016-06-07"   #发布时间
            }
        ]
    }
}
```

#### 3.3 新闻内容查询接口
> 新闻内容查询接口提供了查询指定新闻内容功能（注意：显示新闻的时候只要在news_reader及news_classer范围内的用户都能看到本新闻）

> [新闻内容查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/putnews/news=[id]&type=[type]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `news`:   新闻对应的id编号
    - `type`:   需要以何种身份查询新闻列表，0-以教师（自己的tid）身份查询新闻列表；1-以管理员（自己的tid）身份查询新闻列表；9-以家长身份（家长pid对应的student_id对应的班级cid）查询新闻列表
Response:
    - `status`：0->is OK
                1->失败，无调用权力打开id内容
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - 'news_id'：返回更新成功的新闻news_id
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data":{
        "news_id":"2311",  ＃新闻id
        "news_title":"学校采风",
        "is_pic":"0",
        "news":"sdfaja;sfjalsjflasjfasfjaskdsjfaldjf"
    }
}
```

### 4. 通讯录部分接口
#### 4.1 教师查询任课班级
> 详见：
> 五、课表页面接口调用说明
>6 教师课表页面接口
>6.1 教师任课班级查询接口

#### 4.2 班级查询任课老师
> 详见：
> 四、班级管理页面接口说明
>4 班级课程页面接口
>4.1 班级课程页面查询接口

#### 4.3 班级查询家长通讯录
> 这个接口好像可以不用做，貌似和班级学生管理中查询班级学生的接口返回的同样的数据？

> 班级学生查询接口返回当时学期的特定班级的家长数据，班级学生家长页面接口支持分页，支持学生名条件查询

> [班级查询家长接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classparent/term=[xq]&class=[cid]&name=[name]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term`:   查询的学期，如"2016-2017-1"
    - `class`:  查询的班级id，cid
    - `name`:   学生名字查询
    - `page`:   分页编号，每页20条纪录，分页为0或者空时，返回全部数据
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `parents`: 班级任课内容JSON
    - `count`:   班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"20",
        "parents":[
                {   
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                }
            ]
        }
    }
```

### 5. 值日值周部分
#### 5.1 按时间阶段查询值日值周信息接口
> 本接口实现了按照时间段来查询哪一日有特定教师的值日信息，值周信息

> [按时间阶段查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/requireweekinfo/time=[stime|etime]&op=[op_type]&tid=[tid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `time`:   需要查询的起始时间和结束时间，格式：2016-02-02|2016-04-04（base64编码后传出）
    - `op`  :   查询类型，0-值周；1-值日
    - `tid` :   查询的教师对应的tid
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `apply`:  时间安排JSON
    - `count`:  时间安排总天数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"20",
        "apply":[
                {   
                    "type": "0",  #0-值周安排；1-值日安排
                    "id": "222", #对应安排的表纪录岗位id
                    "date":"2016-04-05"
                },
                {
                    "type": "1",  #0-值周安排；1-值日安排
                    "id": "422", #对应安排的表纪录岗位id
                    "date":"2016-04-05"
                }
            ]
        }
    }
}
```

#### 5.2 根据岗位ID查询岗位内容
> 详见：
> 三、工作管理页面接口说明
> 5 岗位详细工作列表页面
> 5.1 岗位详细工作列表查询接口



---

## 二、校园新闻页面接口说明

@(千校云)

> 标签（空格分隔）： 接口 校园新闻

---


### 1.文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
> 系统设置功能包括以下三个页面为新闻列表页面，新闻修改和新闻新增页面，栏目设定管理页面，命名为：新闻管理，新增新闻（修改新闻），栏目管理。

> 新闻管理页面为用户全校新闻列表页面，输入区域包括：栏目筛选和新闻标题搜索，以及栏目置顶，审核，撤销，轮播，删除等设置，新闻列表页面具备分页功能

> 新增新闻（修改新闻）页面为提交新闻使用，也可用于新闻的修改

> 栏目管理页面为新闻栏目的列表管理页面，可以新增栏目，修改栏目，停用栏目

### 3. 新闻管理页面接口
####3.1新闻列表查询接口
> 新闻列表查询接口返回了当前的新闻列表，以时间倒序，显示指定时间内的新闻内容列表供管理员查看（注意：栏目设置为暂停的栏目下的新闻不可见，接口关联查询要加上）

> [新闻列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/newlist/column=[col_id|]&time=[xxxx-04-05|xxxx--05-06]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - column: 指定搜索的栏目ID，多个ID用"|"分割，无column参数或参数无效时返回全部数据
    - time:   指定发布时间间隔的文章列表，起点时间与终点时间以"|"分割
    - page:   page为分页的页面值，当page为空时，返回所有新闻。每个分页返回20条数
Response:
    - `status`：0->成功
                1->无效的栏目id
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - 'news':    新闻数据json
    - 'count':   当前返回新闻数据条数
    - 'page':    新闻数据当前页面编号
    - 'allnum':  全部提交的新闻数据条数
    - 'publish': 全部可见新闻数据条数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "allnum":"70",
        "publish":"68",
        "page":"2",
        "count":"20",
        "news":[
            {
                "news_id": "122",
                "title": "学校建设迈入新阶段",
                "is_audit": "1",   #0-no audit；1-is ok
                "is_top": "1",   ＃是不是置顶0-非置顶；1-置顶
                "is_pic": "1",   ＃是不是包括图片0-不包括；1-包括
                "author": "212",   ＃作者id（tid）
                "author_name": "张俪",   ＃作者名
                "colume_id": "12",   ＃发布栏目id
                "colume_name": "校园风采",   ＃发布栏目名
                "ptime": "2016-06-07"   #发布时间
            },
            {
                "news_id": "122",
                "title": "学校建设迈入新阶段",
                "is_audit": "1",   #0-no audit；1-is ok
                "is_top": "1",   ＃是不是置顶0-非置顶；1-置顶
                "is_pic": "1",   ＃是不是包括图片0-不包括；1-包括
                "author": "212",   ＃作者id（tid）
                "author_name": "张俪",   ＃作者名
                "colume_id": "12",   ＃发布栏目id
                "colume_name": "校园风采",   ＃发布栏目名
                "ptime": "2016-06-07"   #发布时间
            }
        ]
    }
}
```

####3.2 新闻列表批量修改接口
> 新闻列表批量修改接口提供了对新闻的审核，撤销审核（下线），删除，置顶，取消置顶，加入幻灯片，取消幻灯片等操作

> [新闻列表批量修改接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/updanews/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - news_id：     需要操作的新闻news_id
    - op_type：     操作类型，1-审核 2-取消审核（下线） 3-置顶 4-取消置顶 5-加入幻灯 6-取消幻灯 9-删除新闻
示例：
{
    "work_id":"1234",
    "data":[
        {
            "news_id":"2311",  ＃新闻id
            "op_type":"0"
        },
        {
            "news_id":"2314",
            "op_type":"1"
        }
    ]
}
Response:
    - `status`：0->is OK
                1->修改失败，无调用权利
                2->无对应的news_id
                3->op_type类型不正确，无法操作（比如未审核的要取消审核）
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - 'news_id'：返回更新成功的新闻news_id
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data":[
        {
            "news_id":"14"
        },
        {
            "news_id":"15"
        }
    ]
}
```

####3.3 新闻新增及修改接口
> 新闻新增及修改接口提供了对新闻的新增和修改功能（仅对没有发布，没有审核的新闻，注意：不需要审核的新闻发布后是无法修改的，只能删除后重新发布）（注意：显示新闻的时候只要在news_reader及news_classer范围内的用户都能看到本新闻）

> [新闻新增及修改接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/putnews/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - status：      0-新增新闻；1-修改新闻；新增时news_id无效
    - news_id：     需要操作的新闻news_id，仅修改的新闻才需要
    - is_pic：      是否包含有图片 0-无 1-有
    - news：        新闻内容（base64编码）
    - news_type：   新闻的阅读范围 0-全部；1-仅教师；2-教师和家长
    - news_reader： 新闻教师阅读范围，为空表示全部
    - news_classer：新闻班级阅读范围，为空表示全部
示例：
{
    "status":"1",
    "news_id":"2311",  ＃新闻id
    "is_pic":"0",
    "news":"sdfaja;sfjalsjflasjfasfjaskdsjfaldjf",
    "news_type":"2",
    "news_reader":["234","211","332"],   #tID
    "news_classer":["222","211","233"]   #cID
}
Response:
    - `status`：0->is OK
                1->失败，无调用权利
                2->修改失败，无对应的news_id
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - 'news_id'：返回更新成功的新闻news_id
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data":[
        {
            "news_id":"14"
        }
    ]
}
```

### 4. 栏目管理页面接口
####4.1 新闻栏目查询接口
> 新闻栏目查询接口返回了当前的新闻栏目列表，栏目数量不会很多，不考虑分页

> [新闻栏目查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/newscol/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无  : 
Response:
    - `status`：0->成功
                1->无查询栏目权限
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - 'colume':  新闻栏目json
    - 'count':   当前返回新闻栏目条数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"4",
        "colume":[
            {
                "colume_id": "2",
                "title": "学校新闻",
                "auth": "1",   #0-全部用户可读；1-仅教工可读；2-家长及教工可读
                "is_use": "1",   ＃是不是停用；0-正常；1-停用
            },
            {
                "colume_id": "4",
                "title": "教工风采",
                "auth": "1",   #0-全部用户可读；1-仅教工可读；2-家长及教工可读
                "is_use": "0",   ＃是不是停用；0-正常；1-停用
            }
        ]
    }
}
```

####4.2 栏目新增及修改与停用接口
> 栏目新增及修改与接口提供了对栏目的新增和修改（包括删除和停用）功能（注意：停用的新闻栏目在新闻管理列表中不可见）（注意：显示新闻的时候只要在news_reader及news_classer范围内的用户都能看到本新闻）

> [栏目新增及修改与停用接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/putcolumn/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - status：      0-新增栏目；1-修改栏目名；新增时column_id无效；2-停用栏目；3-解除停用；9-删除栏目
    - column_id：   需要操作的栏目column_id，仅修改（修改名称，停用或取消停用）的栏目才需要
    - title：       栏目名称
    - auth：        #0-全部用户可读；1-仅教工可读；2-家长及教工可读
示例：
{
    "status":"1",
    "colume_id": "2",
    "title": "学校新闻",
    "auth": "1"
}
Response:
    - `status`：0->is OK
                1->失败，无调用权利
                2->新增失败，重复的栏目名
                3->修改失败，无效的栏目ID
                4->停用失败，已经停用的栏目
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - 'news_id'：返回更新成功的新闻news_id
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data":[
        {
            "colume_id":"14"，
            "is_use": "1",   ＃是不是停用；0-正常；1-停用
        }
    ]
}
```

## 三、工作管理页面接口说明

@(千校云)


>标签（空格分隔）： 接口 工作管理

---

### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
 > 工作管理功能包括值日值周管理，请假管理，保修管理和活动管理三个页面，命名为：值日值周，请假管理，保修管理和活动管理。值日值周页面可以查看值日值周安排以及对值日值周岗位进行管理，还可以新增和修改值日值周内容。

 > 值日值周页面通过选择学期查看对应的值日值周数据，值日值周内容可以不考虑分页，应该每天的内容是有限的。值日值周岗位列表按键可以打开值日值周岗位管理功能。添加值日事项则可以新增或者修改值日事项。值日值周页面可以点选工作事项安排中的人员一列，直接为值日或者值周安排教工。另外可以批量删除值日和值周工作。还可以选择应用到其他周或者应用到其他日（按星期）

 > 值日值周岗位列表页面列出了当前所有的岗位职责名称，可以新增岗位，也可以批量的删除岗位，或者删除指定的岗位，并能停用或者启用不同的岗位。

 > 岗位管理页面列出了指定岗位的全部岗位职责，并能对岗位职责进行添加，修改和删除

 > 值日值周添加页面可以用于值日的添加，值周的添加

 > 应用到其他周弹窗用于把值周安排复制到其他周

 > 应用到其他日弹窗用于把值日安排复制到其他日（按星期）

### 3. 值日值周页面接口
#### 3.1 学期查询接口
> 学期查询接口用于查询系统中设置了那些学期，每个学期的标识为"2016-2017-1"即2016-2017学年第一个学期（上学期，不直接注明上下学期是为了保证有多个学期 (>2)的情况。

> [学期查询接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/term/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
        - 无 : 无参数
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   学期内容JSON
        - `now`:    当前学期
        - `count`:  学期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "term": [
            {
                "xq": "2016-2017-1",
                "default":"0",   #0-可查看学期；1-缺省设置学期
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "xq": "2016-2017-2",
                "default":"1",
                "time": {
                    "stime": "2017/02/21",
                    "etime": "2017/07/21"
                }
            }
        ]
    }
}
```

#### 3.2 值周工作安排查询接口
> 值周工作安排查询接口用于查询指定学期中每周设置了那些值周数据，本接口调用时需要传入学期编号和周编号，返回的是本周值周工作列表，值周内容条数有限，不考虑分页功能
>
> [值周工作安排查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/weekduty/term=[term]&week=[2]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 指定查询的学期，term为空时查询缺省的学期
    - `week` : 指定该学期的对应周，当数据为空时，选择当前日期所在的周
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `weekduty`    : 值周数据内容JSON
    - `count`       : 值周数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "weekduty": [
            {
                "weekduty_id":"221",   #值周安排对应的id
                "duty_id":"22",   #岗位id
                "duty_name": "学校安全检查",   #岗位内容
                "manager":[
                    {
                        "tid":"212",
                        "name":"张高丽"
                    },{
                        "tid":"221",
                        "name":"李为民"
                    }
                    ]   #责任教师Tid集合
                    "duty_tid":[
                    {
                        "tid":"211",
                        "name":"高丽"
                    },{
                        "tid":“234”,
                        "name":"张丽"
                    },{
                        "tid":“213”,
                        "name":"王丽"
                    },{
                        "tid":“215”,
                        "name":"张高丽"
                    }
                ]
            },
            {
                "weekduty_id":"224",   #值周安排对应的id
                "duty_id":"21",   #岗位id
                "duty_name": "学校卫生检查",   #岗位内容
                "manager":[
                    {
                        "tid":"212",
                        "name":"张高丽"
                    },{
                        "tid":"221",
                        "name":"李为民"
                    }
                    ]   #责任教师Tid集合
                    "duty_tid":[
                    {
                        "tid":"211",
                        "name":"高丽"
                    },{
                        "tid":“234”,
                        "name":"张丽"
                    },{
                        "tid":“213”,
                        "name":"王丽"
                    },{
                        "tid":“215”,
                        "name":"张高丽"
                    }
                ]
            }
        ]
    }
}
```

#### 3.3 值日工作安排查询接口
> 值日工作安排查询接口用于查询指定学期中指定日设置了那些值日数据，本接口调用时需要传入学期编号和日期编号，返回的是本日值日工作列表，值日内容条数有限，不考虑分页功能

> [值日工作安排查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dateduty/term=[term]&date=[date]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 指定查询的学期，term为空时查询缺省的学期
    - `date` : 指定该学期的对应日，当数据为空时，选择当前日期
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `dateduty`    : 值日数据内容JSON
    - `count`       : 值日数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "dateduty": [
            {
                "dateduty_id":"221",   #值周安排对应的id
                "duty_id":"22",   #岗位id
                "duty_name": "学校安全检查",   #岗位内容
                "manager":[
                    {
                        "tid":"212",
                        "name":"张高丽"
                    },{
                        "tid":"221",
                        "name":"李为民"
                    }
                    ]   #责任教师Tid集合
                    "duty_tid":[
                    {
                        "tid":"211",
                        "name":"高丽"
                    },{
                        "tid":“234”,
                        "name":"张丽"
                    },{
                        "tid":“213”,
                        "name":"王丽"
                    },{
                        "tid":“215”,
                        "name":"张高丽"
                    }
                ]
            },
            {
                "dateduty_id":"224",   #值周安排对应的id
                "duty_id":"21",   #岗位id
                "duty_name": "学校卫生检查",   #岗位内容
                "manager":[
                    {
                        "tid":"212",
                        "name":"张高丽"
                    },{
                        "tid":"221",
                        "name":"李为民"
                    }
                    ]   #责任教师Tid集合
                    "duty_tid":[
                    {
                        "tid":"211",
                        "name":"高丽"
                    },{
                        "tid":“234”,
                        "name":"张丽"
                    },{
                        "tid":“213”,
                        "name":"王丽"
                    },{
                        "tid":“215”,
                        "name":"张高丽"
                    }
                ]
            }
        ]
    }
}
```

#### 3.4 值周（值日）工作岗位列表查询接口
> 值周（值日）工作岗位列表查询接口用于查询系统设置了那些值周岗位（值日岗位），内容条数有限，不考虑分页功能

> [值周（值日）工作岗位列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dutylist/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `无`
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `duty`    : 值周值日数据内容JSON
    - `count`   : 值周值日数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "dateduty": [
            {
                "duty_id":"22",   #岗位id
                "duty_name": "学校安全检查"   #岗位内容
            },
            {
                "duty_id":"21",   #岗位id
                "duty_name": "学校卫生检查"   #岗位内容
            }
        ]
    }
}
```

#### 3.5 值周（值日）工作岗位详情查询接口
> 值周（值日）工作岗位详情查询接口用于查询系统设置了值周岗位（值日岗位）对应的详细条目，内容条数有限，不考虑分页功能

> [值周（值日）工作岗位详情查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dutyinfo/dutyid=[dutyid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `dutyid`  : 需要查询的工作岗位id
Response:
    - `status`: 0->is OK 
                1->duty id 无效
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `duty`    : 值周值日数据内容JSON
    - `count`   : 值周值日数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "duty": [
            {
                "dutyd_id":"22",   #岗位id
                "duty_demo": "学校安全检查",   #岗位内容
                "time":{
                    "stime":"07:00",
                    "etime":"08:00"
                }
            },
            {
                "dutyd_id":"21",   #岗位id
                "duty_demo": "学校卫生检查",   #岗位内容
                "time":{
                    "stime":"07:00",
                    "etime":"08:00"
                }
            }
        ]
    }
}
```

#### 3.6 新增值周（值日）工作安排接口
> 新增值周（值日）工作安排接口用于新增指定学期中特定周或者特定日期的新增工作安排，需要上传对应的学期，对应的周或者日期，对应的新增类型

> [新增值周（值日）工作安排接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/adddutylist/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`    : 指定查询的学期，term为空时查询缺省的学期
    - `op_type` : 新增类型，0-值周，1-值日
    - `week`    : 指定该学期的对应周
    - `date`    : 指定该学期的对应日期
示例：
{
    "term": "2016-2017-1",
    "op_type": "0",
    "date": "",
    "week": "1",
    "info": [
        {
            "duty_id":"221"   #工作事项对应的id
        },
        {
            "duty_id":"222"   #工作事项对应的id
        }
    ]
}
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  校历内容的条目总数
    - `duty` :  返回了新增的值周（值日）条目表中新增数据对于的id，可以通过该id插入领导教师或者值岗教师tid
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
        "duty":[
            "211","231"   #新增的值周（值日）条目id
        ]
    }
}
```

#### 3.7 新增值周（值日）人员安排接口
> 新增值周（值日）人员安排接口用于新增指定学期中特定周或者特定日期的特定工作安排的负责教师，需要上传对应的学期，对应的周或者日期，对应的新增类型
>
> [新增值周（值日）人员安排接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/adddutyteacher/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`    : 指定查询的学期，term为空时查询缺省的学期
    - `op_type` : 新增类型，0-领导，1-值岗教师
    - `week`    : 指定该学期的对应周
    - `date`    : 指定该学期的对应日期
示例：
{
    "term": "2016-2017-1",
    "op_type": "0",
    "date": "",
    "week": "1",
    "info": [
        {
            "tid":"221"   #教师对应的tid
        },
        {
            "tid":"222"   #教师对应的tid
        }
    ]
}
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  校历内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

### 4. 值日值周岗位列表页面
#### 4.1 值日值周岗位列表全部查询接口
> 值日值周岗位列表全部查询接口用于查询系统设置的值周岗位（值日岗位），内容条数有限，不考虑分页功能
>
> [值日值周岗位列表全部查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dutylistall/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `无`  : 
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `duty`    : 值周值日数据内容JSON
    - `count`   : 值周值日数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "duty": [
            {
                "duty_id":"22",   #岗位id
                "duty_demo": "学校安全检查",   #岗位内容
                "duty_count": "2",
                "is_use":"0"   #0-正常；1-停用
            },
            {
                "duty_id":"21",   #岗位id
                "duty_demo": "学校卫生检查",   #岗位内容
                "duty_count": "4",
                "is_use":"1"   #0-正常；1-停用
            }
        ]
    }
}
```

#### 4.2 新增（修改）岗位接口
> 新增（修改）岗位接口用于新增工作岗位或者修改岗位
>
> [新增（修改）岗位接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaduty/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `duty_id` : 岗位对应的id，用于修改岗位
    - `op_type` : 新增类型，0-新增，1-修改
示例：
{
    "op_type": "0",
    "duty_id": "22",   #岗位id
    "duty_demo": "学校安全检查",   #岗位内容
}
Response:
    - `status`: 0->is OK 
                1->duty_id不存在
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `duty_id`:  校历内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "duty_id": "22"
    }
}
```

#### 4.3 删除（停用）岗位接口
> 删除岗位接口用于新增工作岗位或者修改岗位，支持批量操作
>
> [删除岗位接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaduty/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `duty_id` : 岗位对应的id，用于删除或者停用岗位
    - `op_type` : 新增类型，0-删除，1-停用，2-恢复
示例：
{
    "duty_id": ["12","13"],
    "op_type": "0"
}
Response:
    - `status`: 0->is OK 
                1->duty_id不存在
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

### 5. 岗位详细工作列表页面
#### 5.1 岗位详细工作列表查询接口
> 岗位详细工作列表查询接口用于查询岗位（值日岗位）的详细工作安排，内容条数有限，不考虑分页功能
>
> [岗位详细工作列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dutydetail/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `duty_id`  : 岗位对应的id编号 
Response:
    - `status`: 0->is OK 
                1->岗位id不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `detail`    : 值周值日数据内容JSON
    - `count`   : 值周值日数据内容的条目总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "detail": [
            {
                "dutyd_id":"22",   #岗位id
                "dutyd_demo": "学校安全检查",   #岗位内容
                "time": {
                    "stime": "07:00",
                    "etime": "08:00"
                }
            },
            {
                "dutyd_id":"21",   #岗位id
                "dutyd_demo": "学校卫生检查",   #岗位内容
                "time": {
                    "stime": "07:00",
                    "etime": "08:00"
                }
            }
        ]
    }
}
```

#### 5.2 岗位详细工作新增接口
> 岗位详细工作列表新增接口用于新增岗位（值日岗位）的详细工作安排
>
> [岗位详细工作列表新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/adddutydetail/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `duty_id` : 岗位对应的id，用于新增的岗位
    - `dutyd_demo`  : 工作对应的内容
    - `stime`  : 工作开始时间
    - `etime`  : 工作结束时间
示例：
{
    "duty_id": "12",
    "dutyd_demo": "学校安全检查",   #岗位内容
    "time": {
        "stime": "07:00",
        "etime": "08:00"
    }
}
Response:
    - `status`: 0->is OK 
                1->岗位id不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```

#### 5.3 岗位详细工作删除接口
> 岗位详细工作列表删除接口用于删除岗位（值日岗位）的详细工作安排
>
> [岗位详细工作列表删除查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/dutydetail/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `duty_id`  : 岗位对应的id编号 
{
    "duty_id": "12",
    "dutyd_id": "23",   #工作编号id，要删除的工作编号
}
Response:
    - `status`: 0->is OK 
                1->岗位id不正确
                2->工作id编号不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```


## 四、班级管理页面接口说明

@(千校云)


> 标签（空格分隔）： 接口 班级管理

---

### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
 > 班级管理功能包括以下两个页面为班级列表管理页面，以及班级学生管理页面，命名为：班级管理，班级学生。班级管理页面可以进入班级详情页面，班级详情页面由班级课程页面和班级学生页面组成。其中班级课程页面能指定班级开设的课程和任课老师，以及班级的班主任老师。班级学生页面可以查看本班级的学生信息和学生对应的家长信息。班级学生页面是整个学校学生数据的调整页面，可以实现学生调班级，删除学生，新增学生等功能
 
 > 班级管理页面列出了不同学期的全校班级数据，并能实现分页显示和班级搜索功能，还可以根据班级对应的年纪名称进行搜索（label1字段的内容进行搜索）
 
 > 班级详情的班级课程页面列出了班级开设的课程和任课老师的关联关系，本页面可以指定班主任（本功能页面上缺，应该补上），本页面也可以指定开设的课程以及课程对应的任课老师
 
 > 班级详情的班级学生页面列出了本班级的全部学生数据，可以对学生数据进行修改，删除（不能新增学生，是否也应该不能删除才对？）
 
 > 班级学生页面类似与教工组织页面，列出了全校班级情况和每个班级的学生数据情况。该页面可以对班级学生进行修改数据，新增学生，删除学生，以及移动学生操作。

### 3. 班级管理页面接口
####3.1 班级数据列表查询接口
> 班级查询接口为复合接口，返回当时的班级数据，以及班级数据对应的班级课程数据，和班级任课老师数据。（以上通过查询数据库班级教师课程关联表获得信息，该表录入时需要先录入班级课程，然后录入课程任课老师），班级接口支持分页，支持条件查询（按学期，按Label1标签，按班级编号搜索）
>
> [班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classbase/t=[term]&label=[label]&name=[name]&page=[page]&cid=[cid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
    - `label`: 查询的班级标签第一个字段内容，label1中的标签内容
    - `name` : 搜索班级的编号id，返回包含该id的班级
    - `cid`  ；特定的班级数据，cid为空返回所有数据
    - `page` : 班级分页数据，page＝0时返回全部班级数据，其他数据返回指定的分页对应的班级数据，每次20条数据
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "is_leader":"1"   #0-普通老师，1-班主任标示
                    }
                ]
            },
            {
                "name":"高三二班",
                "cid":"234",
                "cnum":"2015-2",   #班级编号，如“2016-1”，2016年入学1班
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "is_leader":"1"   #0-普通老师，1-班主任标示
                    }
                ]
            }
        ]
    }
}
```

####3.2 学期查询接口
 > 学期查询接口用于查询系统中设置了那些学期，每个学期的标识为"2016-2017-1"即2016-2017学年第一个学期（上学期，不直接注明上下学期是为了保证有多个学期 (>2)的情况。
>
> [学期查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/term/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
        - 无 : 无参数
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   学期内容JSON
        - `now`:    当前学期
        - `count`:  学期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "term": [
            {
                "xq": "2016-2017-1",
                "default":"0",   #0-可查看学期；1-缺省设置学期
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "xq": "2016-2017-2",
                "default":"1",
                "time": {
                    "stime": "2017/02/21",
                    "etime": "2017/07/21"
                }
            }
        ]
    }
}
```

####3.3 班级年级标签（label1标签）查询接口
> 班级年级标签接口返回当前学期的班级年级标签数据。

> [班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classyear/t=[term]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**
``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "classyear": [
            {
                "name":"高三"
            },
            {
                "name":"高二"
            }
        ]
    }
}
```

### 4. 班级课程页面接口
####4.1 班级课程页面查询接口
>同上面的班级查询接口

> 班级查询接口为复合接口，返回当时的班级数据，以及班级数据对应的班级课程数据，和班级任课老师数据。（以上通过查询数据库班级教师课程关联表获得信息，该表录入时需要先录入班级课程，然后录入课程任课老师），班级接口支持分页，支持条件查询（按学期，按Label1标签，按班级编号搜索）

> [班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classbase/t=[term]&label=[label]&name=[name]&page=[page]&cid=[cid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
    - `label`: 查询的班级标签第一个字段内容，label1中的标签内容
    - `name` : 搜索班级的编号id，返回包含该id的班级
    - `cid`  ；特定的班级数据，cid为空返回所有数据
    - `page` : 班级分页数据，page＝0时返回全部班级数据，其他数据返回指定的分页对应的班级数据，每次20条数据
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"1",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "is_leader":"1"   #0-普通老师，1-班主任标示
                    }
                ]
            }
        ]
    }
}
```

####4.2 学校课程查询接口
> 课程查询接口查询本校开设的全部课程，为简单操作起见，课程设置时不关联学期，如果需要关联学期，则需要配置课程时需要按学期配置
>
> [课程查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
    Url:        /qxy/course/token=[token]
    Method:     GET
    Header:     Content-type:application/json
    Parameter:
        - 无 : 
    Response:
        - `status`：0->is OK 
                    11->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `course`: 学科课程内容JSON
        - `count` : 学科课程总数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"3",
        "course": [
            {
                "course_id": "2",
                "course_n": "数学"
            },
            {
                "course_id": "1",
                "course_n": "语文"
            },
            {
                "course_id": "3",
                "course_n": "化学"
            }
        ]
    }
}
```

####4.3 班级课程更新接口
> 班级课程更新接口为更新特定班级的课程和任课老师数据。（以上通过查询数据库班级教师课程关联表获得信息，该表录入时需要先录入班级课程，然后录入课程任课老师）
>
> [班级课程更新接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/upclasscourse/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
    - `cid`  ；特定的班级数据，cid为空返回所有数据
示例：
{
    "term":"2016-2017-1",
    "cid":"234",
    "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
    "base": [
        {
            "tid": "3434",
            "course_id": "1",
        },
        {
            "tid": "2334",
            "course_id": "2",
        },
        {
            "course_id": "4",
        },
        {
            "tid": "2334",
            "is_leader":"1"   #0-普通老师，1-班主任标示
        }
    }
}
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "is_leader":"1"   #0-普通老师，1-班主任标示
                    }
                ]
            }
        ]
    }
}
```

####4.4 教师标签查询接口
>详见：
>七、校通讯录管理页面接口说明
>3 教工管理页面接口
>3.1 教工标签查询接口

####4.5 教师列表查询接口
>详见：
>七、校通讯录管理页面接口说明
>3 教工管理页面接口
>3.2 教工列表查询接口

####4.6 班级班主任指定接口
> 班级班主任更新接口为更新特定班级的班主任老师数据。（以上通过查询数据库班级教师课程关联表获得信息，该表录入时需要先录入班级课程，然后录入课程任课老师）

> [班级课程更新接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/upclassleader/t=[term]&token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
    - `cid`  ；特定的班级数据，cid为空返回所有数据
示例：
{
    "term":"2016-2017-1",
    "cid":"234",
    "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
    "tid": "2334",
    "is_leader":"1"   #0-普通老师，1-班主任标示
}
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "cnum":"2016-1",   #班级编号，如“2016-1”，2016年入学1班
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "email": "xxx@qq.com",
                        "tele": "13987634522",
                        "is_leader":"1"   #0-普通老师，1-班主任标示
                    }
                ]
            }
        ]
    }
}
```

### 5. 班级学生页面接口
####5.1 班级学生页面查询接口
> 班级学生查询接口返回当时学期的特定班级的学生数据，班级学生页面接口支持分页，支持学生名条件查询

> [班级学生查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classstudent/term=[xq]&class=[cid]&name=[name]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term`:   查询的学期，如"2016-2017-1"
    - `class`:  查询的班级id，cid
    - `name`:   学生名字查询
    - `page`:   分页编号，每页20条纪录，分页为0或者空时，返回全部数据
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `student`: 班级任课内容JSON
    - `count`:   班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"20",
        "student":[
                {   
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽",
                    "scard_id": "234324242",   #学号
                    "sparent_id": "134",
                    "sparent_name": "张强",
                    "sparent_tele": "13987723412",
                    "is_use":"0"   #是否激活，0-未激活；1-激活
                }
            ]
        }
    }
}
```

####5.2 学生信息详情查询接口
> 学生信息详情查询接口返回当时学期的特定班级的特定学生详情数据

> [班级学生查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/studentinfo/student_id=[student_id]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `student_id`: 查询的学生id
Response:
    - `status`：0->token is OK 
                1->无效的student_id
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `student`: 班级任课内容JSON
    - `count`:   班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "student_id": "3434",
        "sname": "张高丽",
        "birthday": "2004-04-05",
        "school": "新村一小",
        "in_flag": "分配",
        "in_year": "2010-09-01",
        "scard_id": "234324242",   #学号
        "sclass": "2010-3",
        "stele": "13987723451",
        "sadress": "新春一街12号",
        "sparent_id": "134",
        "sparent_name": "张强",
        "sparent_tele": "13987723412",
        "sparent_work": "国联一厂",
        "sparent_title": "工程师",
        "sparent_name2": "刘丽",
        "sparent_tele2": "13455534562",
        "sparent_work2": "中医院",
        "sparent_title2": "医生",
        "sparent_demo1": "13987723412",
        "sparent_demo2": "134",
        "sparent_demo3": "张强",
        "sparent_demo4": "13987723412"
    }
}
```

####5.3 学生信息详情删除接口
> 学生信息详情删除接口删除特定学生详情数据

> [班级学生删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/outstudentinfo/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `student_id`: 查询的学生id
示例：
{
    "student":[
	    {
	        "student_id":"123"
	    },
	    {
	        "student_id":"234"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无效的student_id
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:   删除的学生总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```
####5.4 学生信息新增（修改）接口
> 学生信息新增（修改）接口处理学生基础信息的新增和修改功能

> [学生信息新增（修改）接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updatech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `type`: 操作类型，0-新增，1-修改
    - `cid` : 班级id
示例：
{
    "cid":"23",
    "student_id":"123",
    “type":"0",
    "data":{
        "sname": "张高丽",
        "birthday": "2004-04-05",
        "school": "新村一小",
        "in_flag": "分配",
        "in_year": "2010-09-01",
        "scard_id": "234324242",   #学号
        "sclass": "2010-3",
        "stele": "13987723451",
        "sadress": "新春一街12号",
        "sparent_id": "134",
        "sparent_name": "张强",
        "sparent_tele": "13987723412",
        "sparent_work": "国联一厂",
        "sparent_title": "工程师",
        "sparent_name2": "刘丽",
        "sparent_tele2": "13455534562",
        "sparent_work2": "中医院",
        "sparent_title2": "医生",
        "sparent_demo1": "13987723412",
        "sparent_demo2": "134",
        "sparent_demo3": "张强",
        "sparent_demo4": "13987723412",
    }
}
Response:
    - `status`：0->token is OK 
                1->无权新增学生信息
                2->对应的student_id身份无效，修改学生信息时
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `student_id`:  学生信息修改成功后的id
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "student_id": "123"
}
```

### 6. 学生管理页面接口
####6.1 班级学生页面查询接口
> 详见：
> 四、班级管理页面接口说明
> 5 班级学生页面接口
> 5.1 班级学生页面查询接口

####6.2 班级查询接口
> 详见：
> 四、班级管理页面接口说明
> 3 班级管理页面接口
> 3.1 班级数据列表查询接口

####6.3 学生详细信息查询接口
> 详见：
> 四、班级管理页面接口说明
> 5 班级学生页面接口
>5.2 学生信息详情查询接口

####6.4 学生详细信息删除接口
> 详见：
> 四、班级管理页面接口说明
> 5 班级学生页面接口
>5.3 学生信息详情删除接口

####6.5 学生详细信息新增（修改）接口
> 详见：
> 四、班级管理页面接口说明
> 5 班级学生页面接口
>5.4 学生信息新增（修改）接口

## 五、课表页面接口调用说明

@(千校云)


> 标签（空格分隔）： 接口文档 后台

---
### 1、文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

>加入分页控制（班级查询接口，学期查询接口，学校教师查询接口）此处有疑问，需要确认
    
### 2. 页面说明
 > 课表录入页面为课表录入页面，输入区域包括：学年选择框，班级选择框，作息模板选择框，以及课表输入表格和科目选择按钮（科目选择按钮下方可以选择任课老师）
 
 > 课表显示页面为课表查询页面，输入区域包括：学年选择框，班级选择框，和科目选择按钮，课表表格为只读查询状态

### 3. 课表页面读取接口
#### 3.1 学期查询接口
 > 学期查询接口用于查询系统中设置了那些学期，每个学期的标识为"2016-2017-1"即2016-2017学年第一个学期（上学期，不直接注明上下学期是为了保证有多个学期 (>2)的情况。

> [学期查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/term/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
        - 无 : 无参数
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   学期内容JSON
        - `now`:    当前学期
        - `count`:  学期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "term": [
            {
                "xq": "2016-2017-1",
                "default":"0",   #0-可查看学期；1-缺省设置学期
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "xq": "2016-2017-2",
                "default":"1",
                "time": {
                    "stime": "2017/02/21",
                    "etime": "2017/07/21"
                }
            }
        ]
    }
}
```

#### 3.2 班级查询接口（包括班级作息模板数据）
> 班级查询接口为复合接口，返回当时的班级数据，以及班级数据对应的班级课程数据，和班级任课老师数据。（以上通过查询数据库班级教师课程关联表获得信息，该表录入时需要先录入班级课程，然后录入课程任课老师）

> [班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classbase/t=[term]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - term : 查询的学期，如"2016-2017-1"
Response:
    - `staus`： 0->token is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**
``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    }
                ]
            },
            {
                "name":"高三二班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    }
                ]
            }
        ]
    }
}
```

#### 3.3 作息模板数据查询
> 作息模板设置用于查询学校设置了那些作息模板

> [作息模板查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/worktime/work=[work_id]&token=[token]
Method:     GET
Header: Content-type:application/json
Parameter:
    - work : work_id为需要查询的作息模板id,当work_id为空时返回所有模板数据
Response:
    - `status`：    0->is OK 
                    11->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
    - `worktime`:   作息模板内容JSON
```

> **返回结果示例：**
``` json
{
    "status": 0,
    "data": {
        "worktime":[
	        {
                "name":"作息模板一",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "sch_id": "1",
                        "quantum": "早晨",
                        "stime": "07:00",
                        "etime": "08:00"
                    },
                    {
                        "sch_id": "2",
                        "quantum": "上午一",
                        "stime": "08:00",
                        "etime": "08:45"
                    },
                    {
                        "sch_id": "3",
                        "quantum": "上午二",
                        "stime": "08:88",
                        "etime": "09:40"
                    },
                    {
                        "sch_id": "4",
                        "quantum": "上午三",
                        "stime": "10:00",
                        "etime": "10:45"
                    },
                    {
                        "sch_id": "5",
                        "quantum": "上午四",
                        "stime": "10:55",
                        "etime": "11:40"
                    },
                    {
                        "sch_id": "6",
                        "quantum": "下午一",
                        "stime": "14:00",
                        "etime": "14:45"
                    },
                    {
                        "sch_id": "7",
                        "quantum": "下午二",
                        "stime": "14:55",
                        "etime": "15:40"
                    }
                ]
            },
            {
                "name":"作息模板二",
                "work_id":"2", #word_id为作息模板的编号
                "base": [
                    {
                        "sch_id": "1",
                        "quantum": "早晨",
                        "stime": "07:00",
                        "etime": "08:00"
                    },
                    {
                        "sch_id": "2",
                        "quantum": "上午一",
                        "stime": "08:00",
                        "etime": "08:45"
                    },
                    {
                        "sch_id": "3",
                        "quantum": "上午二",
                        "stime": "08:88",
                        "etime": "09:40"
                    },
                    {
                        "sch_id": "4",
                        "quantum": "上午三",
                        "stime": "10:00",
                        "etime": "10:45"
                    },
                    {
                        "sch_id": "5",
                        "quantum": "上午四",
                        "stime": "10:55",
                        "etime": "11:40"
                    }
                ]
            }
        ]
    }
}
```

#### 3.4 班级课程接口
> 参考班级课程数据接口如：
> 四、班级管理页面接口说明
> 4 班级课程页面接口
>4.1 班级课程页面查询接口
#### 3.5 课程查询接口
> 课程查询接口查询本校开设的全部课程，为简单操作起见，课程设置时不关联学期，如果需要关联学期，则需要配置课程时需要按学期配置

> [课程查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
    Url:        /qxy/course/token=[token]
    Method:     GET
    Header:     Content-type:application/json
    Parameter:
        - 无 : 
    Response:
        - `status`：0->is OK 
                    11->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `course`: 学科课程内容JSON
        - `count` : 学科课程总数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "count":"3",
        "course": [
            {
                "course_id": "2",
                "course_n": "数学"
            },
            {
                "course_id": "1",
                "course_n": "语文"
            },
            {
                "course_id": "3",
                "course_n": "化学"
            }
        ]
    }
}
```

#### 3.6 班级任课老师查询接口
> 班级课程任课老师查询接口返回了特点班级的课程和任课老师数据

> [班级任课老师查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classcourse/term=[xq]&class=[cid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - term:     查询的学期，如"2016-2017-1"
    - class:    查询的班级id，cid
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `class`:  班级任课内容JSON
    - `count`:  班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "class":{
            "name":"高三一班",
            "cid":"234",
            "work_id":"1", #work_id为作息模板的编号
            "base": [
                {   
                    "tid": "3434",
                    "tname": "张高丽",
                    "course_id": "1",
                    "course_n": "语文"
                },
                {
                    "tid": "2334",
                    "tname": "高山",
                    "course_id": "2",
                    "course_n": "数学"
                },
                {
                    "course_id": "4",
                    "course_n": "化学"
                }
            ]
        }
    }
}
```

#### 3.7 班级课表查询接口
> 班级课表查询接口返回了特定班级的特定日期的课程和任课老师数据

> [班级课表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/schedule/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - term:     查询的学期，如"2016-2017-1"
    - class:    查询的班级id，cid
示例：
{
    "term":"2016-2017-1",
    "class":"214",
    "schedule":[{"date":"2016-07-08"},{"date":"2016-07-09"}]
}
Response:
    - `status`：0->token is OK 
                1->无权限查询课表
                2->无权限查询班级
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `schedule`:   班级课表内容JSON
    - `count`:      班级课表包括的查询日期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "schedule":[
            {
                "date": "2016-07-08",
                "course":[
                    {
                        "sch_id":"1",
                        "tid": "2334",
                        "tname": "张高丽",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {   
                        "sch_id":"2",
                        "tid": "2331",
                        "tname": "王丽",
                        "course_id": "2",
                        "course_n": "数学"
                    }
                ]
            },
            {
                "date": "2016-07-09",
                "course":[
                    {
                        "sch_id":"1",
                        "tid": "2334",
                        "tname": "张高丽",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {   
                        "sch_id":"2",
                        "tid": "2331",
                        "tname": "王丽",
                        "course_id": "2",
                        "course_n": "数学"
                    }
                ]
            }    
        ]
    }
}
```
###4. 选择教师弹出框调用接口

>**以下接口为选择老师的弹出窗口调用的查询接口**

#### 4.1 学校教师查询接口
> 学校教师查询接口按照传入的学校标签ID返回该标签对应的教师列表，当传入的学校标签为空时，返回全部教师信息。

> [学校教师查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/teacher/label=[label_id]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - label:    标签ID，为空返回全部教师
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `teacher`     : 教师列表内容JSON
    - `count`       : 教师列表总数
```
> **返回结果示例：**
```
{
    "status": 0,
    "data": {
        "count":"3",
        "teacher": [
            {
                "t_id": "4",
                "t_name": "张山",
                "t_account": "zhangshan@qq.com",
                "t_tele": "13789343221"
            },
            {
                "t_id": "2",
                "t_name": "李四",
                "t_account": "lishi@126.com",
                "t_tele": ""
            },
            {
                "t_id": "6",
                "t_name": "王五",
                "t_account": "wangw@163.com",
                "t_tele": "17782342321"
            }
        ]
    }
}
```

#### 4.2 学校教工标签查询接口
 > 学校标签查询接口返回学校通讯录中设置的标签列表。
 
 > [学校标签查询接口](http://api.xxx.com)需要使用Token验证查询者身份
``` 
Url:        /qxy/techlab/&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无 :   
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `techlab`:教师标签内容JSON
    - `count`:  教师列表总数
```
> 返回结果示例：
```
{
    "token": 0,
    "data": {
        "count":"3",
        "techlab": [
	        {
	            "t_id": "4",
	            "t_name": "教务一组"
	        },
	        {
	            "t_id": "2",
	            "t_name": "教研一组"
	        },
	        {
	            "t_id": "6",
	            "t_name": "教学一组"
	        }
	    ]
	}
}
```

###5. 班级课表页面相关接口
#### 5.1 班级课表提交接口
> 班级课表提交接口提交了特定班级的特定日期的课程和任课老师数据

> [班级课表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updasche/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - term:     提交的学期，如"2016-2017-1"
    - class:    提交的班级id，cid
示例：
{
    "term":"2016-2017-1",
    "class":"214",
    "schedule":[
	    {
	        "date":"2016-07-08",
	        "course":[
	            {
	                "sch_id":"1",
	                "tid": "2334",
	                "course_id": "1"
	            },
	            {   
	                "sch_id":"2",
	                "tid": "2331",
	                "course_id": "2"
	            }
	        ]
	    },
	    {
	        "date":"2016-07-09",
	        "course":[
	            {
	                "sch_id":"1",
	                "tid": "2334",
	                "course_id": "1"
	            },
	            {   
	                "sch_id":"2",
	                "tid": "2331",
	                "course_id": "2"
	            }
	        ]
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限修改课表
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  班级课表修改成功的日期数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

#### 5.2 班级任课老师修改接口
> 班级课程任课老师修改接口提交了特定班级的课程和任课老师数据

> [班级任课老师修改接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaclco/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - term:     查询的学期，如"2016-2017-1"
    - class:    查询的班级id，cid
示例：
{
    "term":"2016-2017-1",
    "class":"214",    
    "course":[
		{   
		    "tid": "3434",
            "course_id": "1"
	    },
        {
	        "tid": "2334",
            "course_id": "2"
        },
        {
            "course_id": "4"
        }
    ]
}    
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

### 6. 教师课表页面相关接口
#### 6.1 教师任课班级查询接口
> 教师任课班级查询接口提供了教师tid和学期信息查询教师任课的所有班级列表功能

>  [教师任课班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/techclass/t=[term]&tid=[tID]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"
    - `tid`  : 需要查询的教师id 
Response:
    - `staus`： 0->token is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**
``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "course_id": "2",
                        "course_n": "数学"
                    }
                ]
            },
            {
                "name":"高三二班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "is_manager":"1" #班主任
                    },
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "course_id": "2",
                        "course_n": "数学"
                    }
                ]
            }
        ]
    }
}
```



## 六、 学校管理页面接口说明

@(千校云)


>标签（空格分隔）： 接口 学校管理

---

### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
 > 学校管理功能包括校历管理，学校基本信息设置及微信号设置三个页面，命名为：校历管理，学校设置，和微信绑定。其中学校设置和微信绑定页面功能需要在后期进一步完善（学校设置这里会加入管理员权限设置功能，可以学校配置管理员（特定教师）能使用的功能；微信设置则需要考虑绑定不同微信公众号的流程）
 
 > 校历管理页面通过选择不同的学期，展现了不同学期的每周的校历大事列表。在校历管理页面可以进入校历设置页面管理每个学期的设置情况，还可以进入每周的校历大事修改页面，对校历进行修改。

 > 学校设置页面设置了学校的基本信息，以后会加入学校教师管理页面设置，设置学校管理员能打开的页面

 > 微信设置页面暂时不考虑接口问题

### 3. 校历管理页面接口
#### 3.1 学期查询接口
> 学期查询接口用于查询系统中设置了那些学期，每个学期的标识为"2016-2017-1"即2016-2017学年第一个学期（上学期，不直接注明上下学期是为了保证有多个学期 (>2)的情况。

> [学期查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/term/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
        - 无 : 无参数
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   学期内容JSON
        - `now`:    当前学期
        - `count`:  学期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "term": [
            {
                "xq": "2016-2017-1",
                "default":"0",   #0-可查看学期；1-缺省设置学期
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "xq": "2016-2017-2",
                "default":"1",
                "time": {
                    "stime": "2017/02/21",
                    "etime": "2017/07/21"
                }
            }
        ]
    }
}
```

#### 3.2 周校历查询接口
> 周校历查询接口用于查询指定学期中每周设置了那些校历数据，本接口调用时需要传入学期编号和周编号，返回的是本周校历列表，周校历内容条数有限，不考虑分页功能

> [周校历查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/weekinfo/term=[term]&week=[week]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 指定查询的学期，term为空时查询缺省的学期
    - `week` : 指定该学期的对应周，当数据为空时，选择当前日期所在的周
Response:
    - `status`: 0->is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `weekinfo`    :   校历内容JSON
    - `count`       :      校历内容的条目总数
    - `weekinfo_id` : 工作事项对应的id
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "weekinfo": [
            {
                "weekinfo_id":"221",   #工作事项对应的id
                "num":"1",   #序号
                "demo": "学校安全检查",   #校历内容
                "manager":"校办公室",   #责任部门
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "weekinfo_id":"222",   #工作事项对应的id
                "num":"2",   #序号
                "demo": "教学安全检查",   #校历内容
                "manager":"校办公室",   #责任部门
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            }
        ]
    }
}
```

#### 3.3 学校学期数据新增接口
> 学校学期新增接口用于新增学期数据，指定了学期的起始日，学期的结束日和学期名称。并能设置该学期是否为缺省设置学期（注意：学期为缺省设置学期功能为新增功能，界面需要完善）

> [学校学期新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/newweek/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
        - `wname` : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
        - `stime` : 指定该学期的开始日
        - `etime` : 指定该学期的结束日
        - `is_defaule" : 是否时缺省学期，0-不是；1-是
示例：
{
    "wname": "2016-2017-1",
    "stime": "2016-02-12",
    "etime": "2016-07-02",
    "is_default": "1"
}
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   返回学期的内容编号
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "term":"2016-2017-1"
}
```

#### 3.4 学校学期数据设置接口
> 学校学期设置接口用于修改学期数据，重现指定了学期的起始日，学期的结束日和学期名称。并能设置该学期是否为缺省设置学期（注意：学期为缺省设置学期功能为新增功能，界面需要完善）

> [学校学期设置接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaweek/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`  : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
    - `stime` : 指定该学期的开始日
    - `etime` : 指定该学期的结束日
    - `is_defaule" : 是否时缺省学期，0-不是；1-是
示例：
{
    "term": "2016-2017-1",
    "stime": "2016-02-12",
    "etime": "2016-07-02",
    "is_default": "1"
}
Response:
    - `status`: 0->is OK 
                1->team不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `term`:   返回学期的内容编号
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "term":"2016-2017-1"
}
```


#### 3.5 学校学期数据删除接口
> 学校学期删除接口用于删除学期数据

> [学校学期删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/outweek/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`  : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
示例：
{
    "term": "2016-2017-1"
}
Response:
    - `status`: 0->is OK 
                1->term没有对应的学期数据可以删除
                1->team不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```

#### 3.6 学校学期数据关闭显示（打开显示）接口
> 学校学期数据关闭显示（打开显示）接口用于关闭显示学期数据

> [学校学期关闭显示接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/setweek/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`    : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
    - `op_type` : 关闭显示0-关闭，1-打开
示例：
{
    "term": "2016-2017-1",
    "op_type":"0"
}
Response:
    - `status`: 0->is OK 
                1->term没有对应的学期数据可以修改
                2->type不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```

#### 3.7 学期查询接口（查询全部学期，包括不显示的学期）
> 学期查询接口用于查询系统中设置了那些学期，每个学期的标识为"2016-2017-1"即2016-2017学年第一个学期（上学期，不直接注明上下学期是为了保证有多个学期 (>2)的情况。

> [学期查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/termall/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
        - 无 : 无参数
Response:
        - `status`: 0->is OK 
                    10->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
        - `term`:   学期内容JSON
        - `count`:  学期总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "term": [
            {
                "xq": "2016-2017-1",
                "default":"0",   #0-可查看学期；1-缺省设置学期
                "is_show":"0",   #0-可以查看；1-不显示
                "time": {
                    "stime": "2016/09/01",
                    "etime": "2017/01/21"
                }
            },
            {
                "xq": "2016-2017-2",
                "default":"1",
                "is_show":"0",   #0-可以查看；1-不显示
                "time": {
                    "stime": "2017/02/21",
                    "etime": "2017/07/21"
                }
            }
        ]
    }
}
```

#### 3.8 新增（修改）校历工作事项接口
> 新增（修改）校历工作事项接口用于提交新增（修改）过的校历工作事项，需要上传对应的学期和对应的周

> [新增（修改）校历工作事项接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/addworkinfo/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`    : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
    - `week`    : 学期对应的周，需要新增校历工作事项
    - `op_type` : 操作方式，0-新增，1-修改
    - `weekinfo_id` : 工作事项对应的id
    - `num`     :  序号，工作事项（数据库加一个序号字段？）
    - `demo`    : 校历内容
    - `manager` : 责任部门
    - `stime`   : 开始时间
    - `etime`   : 结束时间
示例：
{
    "term": "2016-2017-1",
    "week": "7",   #第七周
    "weekinfo_id": "212",
    "op_type": "0",
    "num": "1",   #序号
    "demo": "学校安全检查",   #校历内容
    "manager":"校办公室",   #责任部门
    "time": {
        "stime": "2016/09/01",
        "etime": "2017/01/21"
    }
}
Response:
    - `status`: 0->is OK 
                1->term没有对应的学期数据可以修改
                2->type不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `weekinfo_id` : 工作事项对应的id`
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "weekinfo_id" : "222"
}
```


#### 3.9 删除校历工作事项校历接口
> 删除校历工作事项接口用于提交删除的校历工作事项，需要上传对应的学期和对应的周及对应的校历工作事项编号

> [新增（修改）校历工作事项接口](http://api.xxx.com)需要使用Token验证查询者身份
``` json
Url:        /qxy/addworkinfo/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `term`    : 指定学期的名称，xxxx-xxxx-1格式（注意：该字段数据库中不能重复）
    - `week`    : 学期对应的周，需要新增校历工作事项
    - `weekinfo_id` : 工作事项对应的id
示例：
{
    "term": "2016-2017-1",
    "week":"7",   #第七周
    "weekinfo_id": "212"
}
Response:
    - `status`: 0->is OK 
                1->term没有对应的学期数据可以修改
                2->week数据不正确
                3->weekinfo_id数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```

### 4. 学期设置页面接口
#### 4.1 学期查询接口（仅显示所有显示的学期）
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.1 学期查询接口
#### 4.2 学期查询接口（查询全部学期，包括不显示的学期）
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.7 学期查询接口（查询全部学期，包括不显示的学期）
#### 4.3 学校学期数据新增接口
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.3 学校学期数据新增接口
#### 4.4 学校学期数据设置接口
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.4 学校学期数据设置接口
#### 4.5 学校学期数据删除接口
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.5 学校学期数据删除接口
#### 4.6 学校学期数据关闭显示（打开显示）接口
> 详见：
> 六、 学校管理页面接口说明
> 3 校历管理页面接口
> 3.6 学校学期数据关闭显示（打开显示）接口



## 七、校通讯录管理页面接口说明

@(千校云)


>标签（空格分隔）： 接口 校通讯录

---
### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
> 校通讯录管理功能包括以下三个页面为校通讯录教工管理页面，以及教工信息新增（修改）页面，对应的教工标签管理页面（包括移动员工在不同标签中），命名为：教工管理，新增教工（修改教工），教工标签管理。

 > 教工管理页面为全校教工列表页面，或者选择的指定教工标签对应的员工列表，该页面有批量操作功能，可以实现员工移动到其他标签，（为简便操作，用户选择全部员工时，员工移动到其他标签为拷贝到其他标签，其他标签间移动则为剪切＋拷贝），或者停用（取消停用）指定的员工

 > 教工信息新增（修改）页面为弹出式窗口，可以选择直接提交关闭，也可以选择下一位直接提交当前信息后，重新录入下一位的教工数据（仅对新增员工弹出窗口有效）

> 教工标签管理页面为弹出式标签管理页面，只能新增标签。删除标签和修改标签直接在标签展示页面上通过鼠标点击后的弹出菜单完成。

### 3. 教工管理页面接口
####3.1 教工标签查询接口
> 教工标签查询接口返回了当前学校的教工标签列表（注意：标签没有停用和启用功能）

> [教工标签查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` 
Url:        /qxy/techlab/&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无 :   
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `techlab`:教师标签内容JSON
    - `count`:  教师列表总数
```
> 返回结果示例：
```
{
    "token": 0,
    "data": {
        "count":"3",
        "techlab": [
	        {
	            "t_id": "4",
	            "t_name": "教务一组"
	        },
	        {
	            "t_id": "2",
	            "t_name": "教研一组"
	        },
	        {
	            "t_id": "6",
	            "t_name": "教学一组"
	        }
	    ]
	}
}
```

####3.2 教师列表查询接口
> 教师列表查询接口返回了当前标签下的教师列表数据，当标签id＝0或者标签ID为空时，返回全部教师列表数据。本接口支持分页查询教师列表（注意：标签没有停用和启用功能）

> [教工标签查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/teacher/label=[label_id]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `label`:    标签ID，为空返回全部教师
    - `page` ：   page对应的分页编号数字，当page＝0或者page为空时，返回所有的教师list
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `teacher`     : 教师列表内容JSON
    - `count`       : 教师列表总数
    - `page`        : 当前的分页编号
```
> **返回结果示例：**
```
{
    "status": 0,
    "data": {
        "page":"0",   #返回的时全部分页
        "count":"3",
        "teacher": [
            {
                "t_id": "4",
                "t_name": "张山",
                "t_account": "zhangshan@qq.com",
                "t_tele": "13789343221"
            },
            {
                "t_id": "2",
                "t_name": "李四",
                "t_account": "lishi@126.com",
                "t_tele": ""
            },
            {
                "t_id": "6",
                "t_name": "王五",
                "t_account": "wangw@163.com",
                "t_tele": "17782342321"
            }
        ]
    }
}
```

####3.3 移动指定标签下的教师到特定标签下的接口
> 移动指定标签下的教师到特定标签下接口处理教师在标签中的移动（修改对应的标示字段）（注意：停用的教师可以显示，但无法移动，也无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [移动指定标签下的教师到特定标签下接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/movetech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - source : 源标签的label_id，当源标签为0时，表示从全部教工标签（缺省标签）下拷贝用户到其他标签中；其余情况为移动标签
    - target ：目标标签的label_id
示例：
{
    "teacher":[
	    {
	        "tid":"123",
	        "source":"0",
	        "target":"12"
	    },
	    {
	        "tid":"234",
	        "source":"1",
	        "target":"12"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限移动教师身份
                2->对应的tid教师身份无效
                3->对应的source_id无效
                4->对应的target_id无效
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师身份修改成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "teacher":[
            {
                "tid": "123"，
                “label_id":"0"
            },
            {
                "tid": "124",
                "label_id":"1"
            }    
        ]
    }
}
```

####3.4 停用（启用）指定的教师身份接口
> 停用（启用）指定的教师身份接口处理教师的停用和启用（修改对应的标示字段）（注意：停用的教师是无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [停用（启用）指定教师身份接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/isusetech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - is_use : 0-use;1-stop    
示例：
{
    "teacher":[
	    {
	        "tid":"123",
	        "is_use":"0"
	    },
	    {
	        "tid":"234"
	        "is_use":"1"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限停用或者启用教师身份
                2->对应的tid教师身份无效
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师身份修改成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "teacher":[
            {
                "tid": "123"，
                “is_use":"0"
            },
            {
                "tid": "124",
                "is_use":"1"
            }    
        ]
    }
}
```

####3.5 移除指定标签下的教师接口
> 移除指定标签下的教师接口处理教师在标签中的移除（修改对应的关联关系表）（注意：停用的教师是可以显示的，但无法移动，也无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [移除指定标签下的教师接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/outtech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - source : 源标签的label_id，当源标签为0时，不能移除
示例：
{
    "teacher":[
	    {
	        "tid":"123",
	        "source":"12"
	    },
	    {
	        "tid":"234",
	        "source":"11"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限移除教师身份
                2->对应的tid教师身份无效
                3->对应的source_id无效，不能从label_id=0的标签中移除教师 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师身份修改成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "teacher":[
            {
                "tid": "123"，
                “label_id":"0"
            },
            {
                "tid": "124",
                "label_id":"1"
            }    
        ]
    }
}
```

### 4. 教工信息新增（修改）页面接口
####4.1 教师信息查询接口
> 教师信息查询接口处理教师基础信息的查询功能（注意：停用的教师在教师特定标签列表中是可以显示，但无法移动，也无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [移除指定标签下的教师接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/techinfo/tid=[tid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - tid : 查询指定tid内容对应的教师详情
Response:
    - `status`：0->token is OK 
                1->无权限查询教师详细信息
                2->对应的tid教师身份无效 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "tid":"123",
        "name":"",
        "sex":"",
        "birthday":"",
        "worktime":"",
        "id_number":"",
        "cardtype":"",
        "cardid":"",
        "address":"",
        "tele":"",
        "email":"",
        "is_use":"0",   ＃是否停用，0-正常 1-停用
        "label":[
            {
                "label_id": "123"，
                “label_name":"教研一组"
            },
            {
                "label_id": "124",
                "label_name":"教研二组"
            }    
        ]
    }
}
```

####4.2 教师信息新增（修改）接口
> 教师信息新增（修改）接口处理教师基础信息的新增和修改功能（注意：停用的教师是可以显示，但无法移动，也无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [教师信息新增（修改）接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updatech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - type : 操作类型，0-新增，1-修改
示例：
{
    "tid":"123",
    “type":"0",
    "data":{
        "name":"",
        "sex":"",
        "birthday":"",
        "worktime":"",
        "id_number":"",
        "cardtype":"",
        "cardid":"",
        "address":"",
        "tele":"",
        "email":""
    }
}
Response:
    - `status`：0->token is OK 
                1->无权新增教师权限
                2->对应的tid教师身份无效
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师身份修改成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "tid": "123"
}
```

####4.3 删除教师基本信息接口
> 删除教师基本信息接口（非删除标签关系）处理教师信息的删除（同时需要删除对应的关联关系表，或者说有关联关系时不容许用户删除教师基本信息。本操作需要放到缺省的全部教师标签下进行！）,支持批量删除操作（注意：停用的教师是可以显示的，但无法移动，也无法登陆的，登录接口需要联表查询教师表的是否启用的标示）

> [移除指定标签下的教师接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/deltech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - tid : 教师id
示例：
{
    "teacher":[
	    {
	        "tid":"123"
	    },
	    {
	        "tid":"234"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限删除教师身份
                2->对应的tid教师身份无效
                3->删除失败，该教师已经在其他地方使用（包括班级，包括教工标签等关联表中）
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师删除成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

### 5. 教工标签管理页面接口
####5.1 教工标签新增接口
> 教工标签新增接口处理教工标签的新增功能（注意：标签没有停用功能！）

> [教工标签新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addtechlab/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - 无 : 
示例：
{
    "label":[
	    {
	        "label_name":"教研一组"
	    },
	    {
	        "label_name":"教研二组"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限新增教工标签身份
                2->新增失败，标签名称重复
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师删除成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

####5.2 教工标签修改接口
> 教工标签修改（删除）接口处理教工标签的新增功能（注意：标签没有停用功能！）

> [教工标签新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addtechlab/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - type : 0-修改标签；9-删除标签 
示例：
{
    “type":"0",
    "label":[
	    {
	        "label_id":"123",
	        "label_name":"教研一组"
	    },
	    {
	        "label_id":"124",
	        "label_name":"教研二组"
	    }
    ]
}
Response:
    - `status`：0->token is OK 
                1->无权限修改教工标签身份
                2->修改失败，标签id无效
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `count`:  教师修改成功的数量
```
> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2"
    }
}
```

## 八、校园安全管理页面接口说明

@(千校云)

> 标签（空格分隔）： 接口 校园安全

---

### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
> 校园安全管理功能包括安全日志及安全规则设置两个页面（原来有个报警信息的页面是不是取消了？貌似手机前端还有啊），命名为：安全日志，报警规则。（安全日志的选择由于班级学生的关系应该和学期关联！）

> 安全日志页面列出了不同学期的全校班级对应的安全日志数据，并能实现分页显示和实现搜索功能。（本页面缺少一个学期选择框，当前应该是最近的默认启用学期）（安全日志的选择由于班级学生的关系应该和学期关联！）

> 报警规则页面列出了班级对应启用的报警规则，还可以新增报警规则条目（弹窗形式）（规则筛选貌似没有什么必要，每个班级都只有几条规则而已）

### 3. 安全日志页面接口
#### 3.1 学校班级列表查询接口
> 学校班级列表查询接口返回当时的班级数据，班级接口支持分页，支持条件查询（按学期，按Label1标签，按班级编号搜索）

> 查询本学校对应的班级简单情况，不用包含课程和任课老师

> [学校班级列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classlist/t=[term]&label=[label]&name=[name]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term` : 查询的学期，如"2016-2017-1"，学期数据为必填数据，当学期为空时，缺省返回当前学期数据
    - `label`: 查询的班级标签第一个字段内容，label1中的标签内容
    - `name` : 搜索班级的编号id，返回包含该id的班级
    - `page` : 班级分页数据，page＝0时返回全部班级数据，其他数据返回指定的分页对应的班级数据，每次20条数据
Response:
    - `staus`： 0->token is OK 
                1->学期数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `class`:  班级内容JSON
    - `now`:    当前学期
    - `count`:  班级总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "now":"2016-2017-1",
        "count":"2",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "cnum":"2016-1"   #班级入学编号，如“2016-1”，2016年入学1班
            },
            {
                "name":"高三二班",
                "cid":"234",
                "cnum":"2015-2"   #班级编号，如“2016-1”，2016年入学1班
            }
        ]
    }
}
```

#### 3.2 班级学生查询接口
> 班级学生列表查询接口返回当时的班级中的学生数据，主要是用来实现选择了班级以后选择学生的下拉框列表

> [班级学生列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

> 查询本班级对应的学生简单情况；
``` json
Url:        /qxy/classstudlist/term=[xq]&class=[cid]&name=[name]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `term`:   查询的学期，如"2016-2017-1"
    - `class`:  查询的班级id，cid
    - `name`:   学生名字查询
    - `page`:   分页编号，每页20条纪录，分页为0或者空时，返回全部数据
Response:
    - `status`：0->token is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `student`: 班级任课内容JSON
    - `count`:   班级课程总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"20",
        "student":[
                {   
                    "student_id": "3434",
                    "sname": "张高丽"
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽"
                },
                {
                    "student_id": "3434",
                    "sname": "张高丽"
                }
            ]
        }
    }
}
```

#### 3.3 班级安全日志查询接口
> 班级安全日志查询接口返回对应的班级的安全日志列表情况，接口支持分页，支持条件查询（按地点，按时间，按进出标志搜索）

> [班级安全日志查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classrfid/cid=[cid]&sid=[student_id]&label=[label]&time=[stime|etime]&page=[page]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `cid`  : 查询的班级cid
    - `sid`  : 班级对应的学生id作为筛选条件
    - `label`: 查询的rfid标签地点
    - `time` : 查询日志的起始和结束时间段，日期表示。为空返回全部
    - `page` : 班级分页数据，page＝0时返回全部班级数据，其他数据返回指定的分页对应的班级数据，每次20条数据
Response:
    - `staus`： 0->token is OK 
                1->标签地点数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `classrfid`:  班级安全日志内容JSON
    - `count`:      安全日志条总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "classrfid": [
            {
                "student_id":"222",
                "name":"张山",
                "time":"2016-07-06 14:02",
                "rfid_id":"2",
                "rfid_name":"校门",
                "flag":"0"   #0-进来；1-出去；2-出现
            },
            {
                "student_id":"222",
                "name":"张山",
                "time":"2016-07-06 14:02",
                "rfid_id":"2",
                "rfid_name":"校门",
                "flag":"0"   #0-进来；1-出去；2-出现
            }
        ]
    }
}
```

#### 3.4 RFID（设备）标签查询接口
> RFID标签查询接口返回对应的学校RFID标签读卡器设置信息，无分页功能

> [RFID标签查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/rfidinfo/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无
Response:
    - `staus`： 0->token is OK 
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `rfid `:  安装地点内容JSON
    - `count`:  安装地点总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "rfid": [
            {
                "rfid_id":"2",
                "rfid_name":"校门"
            },
            {
                "rfid_id":"1",
                "rfid_name":"宿舍"
            }
        ]
    }
}
```

### 4. 报警规则管理页面接口
#### 4.1 学校班级列表查询接口
>详见：
>四、班级管理页面接口说明
>3 班级管理页面接口
> 3.1 班级数据列表查询接口

#### 4.2 班级报警列表查询接口
> 班级报警规则列表查询接口返回对应的班级的安全规则列表情况，接口不用支持分页，不用支持条件查询（可以核对数据库班级报警规则表，了解是否支持以下数据格式）；luodibashi：初步审核数据库支持以下数据格式（2016-7-14）

> [班级报警规则列表查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classalarm/cid=[cid]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - `cid`  : 查询的班级cid
Response:
    - `staus`： 0->token is OK 
                1->CID对应的数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `classalarm`  :   班级安全日志内容JSON
    - `count`       :   安全日志条总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "classalarm": [
            {
                "alarm_id":"222",
                "alarm_name":"上学校门出入规则",
                "place":"1",
                "place_name":"校门",
                "stime":"07:00",
                "etime":"08:00",
                "flag":"0",   #0-进来；1-出去；2-出现
                #以下是时间设置部分
                "time_type":"0",   #时间设置类型：0-指定重复时间（周一到周日），1-特定的日期；
                "time_repeat":"1111100",   #当time_type=0时有效，1111100表示从周一到周五重复，1111111表示从周一到周日重复
                "time_date":"2016-06-07"   #当time_type=1时有效，表示生效的特定日期
            },
            {
                "alarm_id":"223",
                "alarm_name":"上学校门出入规则",
                "place":"2",
                "place_name":"宿舍",
                "stime":"07:00",
                "etime":"08:00",
                "flag":"0",   #0-进来；1-出去；2-出现
                #以下是时间设置部分
                "time_type":"0",   #时间设置类型：0-指定重复时间（周一到周日），1-特定的日期；
                "time_repeat":"1111100",   #当time_type=0时有效，1111100表示从周一到周五重复，1111111表示从周一到周日重复
                "time_date":"2016-06-07"   #当time_type=1时有效，表示生效的特定日期
            }
        ]
    }
}
```

#### 4.3 班级报警规则删除接口
> 班级报警规则删除接口删除对应的班级的特定安全规则

> [班级报警规则删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/outclassalarm/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `cid`         : 查询的班级cid
    - `alarm_id`    : 指定需要删除的规则id
示例：
{
    "cid": "123",
    "alarm_id":"233"
｝
Response:
    - `staus`： 0->token is OK 
                1->CID对应的数据不正确
                2->alarm_id对应的数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
```

> **返回结果示例：**

``` json
{
    "staus": 0
}
```

#### 4.4 班级报警规则新增接口
> 班级报警规则新增接口新增对应的班级的特定安全规则

> [班级报警规则新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addclassalarm/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `cid`         : 查询的班级cid
    - `alarm_id`    : 指定需要删除的规则id
示例：
{
    "cid": "123",
    "alarm_id":［"233","221"]
｝
Response:
    - `staus`： 0->token is OK 
                1->CID对应的数据不正确
                2->alarm_id对应的数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `count`:  新增的规则数
```

> **返回结果示例：**

``` json
{
    "staus": "0",
    "count": "4"
}
```

#### 4.5 报警规则删除接口
> 报警规则删除接口新增（修改）对应的特定安全规则

> [报警规则删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/outalarm/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `alarm_id`    : 指定需要删除的规则id
示例：
{
    "alarm_id":［"233","211"]
｝
Response:
    - `staus`： 0->token is OK 
                1->CID对应的数据不正确
                2->alarm_id对应的数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `count`:   删除的报警规则数量
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "count":"2"
}
```

#### 4.6 报警规则新增（修改）接口
> 报警规则新增（修改）接口新增（修改）对应的特定安全规则

> [报警规则新增（修改）接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaalarm/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - `alarm_id`    : 指定需要删除的规则id
    - `op_type`     : 操作类型，0-新增；1-修改
示例：
{
    "alarm_id":"233",
    "op_type":"1",
    "alarm_name":"上学校门出入规则",
    "place":"2",
    "place_name":"宿舍",
    "stime":"07:00",
    "etime":"08:00",
    "flag":"0",   #0-进来；1-出去；2-出现
    #以下是时间设置部分
    "time_type":"0",   #时间设置类型：0-指定重复时间（周一到周日），1-特定的日期；
    "time_repeat":"1111100",   #当time_type=0时有效，1111100表示从周一到周五重复，1111111表示从周一到周日重复
    "time_date":"2016-06-07"   #当time_type=1时有效，表示生效的特定日期
｝
Response:
    - `staus`： 0->token is OK 
                1->CID对应的数据不正确
                2->alarm_id对应的数据不正确
                10->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use nterface
    - `alarm_id`:   修改过的alarm_id
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "alarm_id":"12"
}
```



## 九、系统设置功能接口说明

@(千校云)


> 标签（空格分隔）： 接口 系统设置

---

### 1. 文档更新说明
> 更新时间：2016-07-09
> 更新内容：（还未改）

### 2. 页面说明
 > 系统设置功能包括以下四个页面为密码修改页面，课程开设管理，班级设定及学校作息时间管理页面，命名为：密码管理，课程管理，班级设定，作息设定。

 > 密码修改页面为用户修改密码的页面，输入区域包括：原始密码和新密码

 > 课程开设管理页面为本学校开设的课程列表和维护页面（可以修改课程名称，新增课程，删除课程和停用课程，停用的课程可以重新启用），课程列表相对较短（中小学不会有太多课程）故不考虑分页（接口依然提供分页功能）

 > 班级开设设定页面为本学期开设的班级列表页面和新增班级管理页面以及修改班级标签的页面（可以删除，修改和新增班级，班级的显示采用标签完成），班级页面实现分页显示并可以通过接口获取更多的班级关联信息

 > 学校作息时间管理页面为学校作息时间及对应班级采用的作息时间列表页面以及对应的班级关联作息时间模版的设置页面和学习作息时间模版列表选择页面，为了能管理学习作息时间模版，还有对应的作息时间模版新增，和作息时间模版详情列表页面，以及作息时间模版的新增设定页面。作息时间模版及每个模版对应的模版都不会太多内容，故不考虑分页处理

### 3. 密码管理页面接口
#### 3.1 密码修改提交接口
> 密码管理修改提交接口提交了特定用户（教师）的密码，生效后原有密码失效

> [密码修改提交接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updatech/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - op:    提交的旧密码，如""，加密方法待定
    - np:    提交的新密码，如""，加密方法待定
示例：
{
    "op":"3223222",
    "np":"7888232"
}
Response:
    - `status`：0->修改密码成功
                1->无权限修改密码
                2->修改密码失败，旧密码不正确
                3->修改密码失败，新密码与旧密码一致
                4->修改密码失败，新密码强度不够
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "staus": “0”
}
```

### 4. 课程管理页面接口
#### 4.1学校课程查询接口
> 学校课程查询接口返回了学校当前设置的课程列表，带分页请求，当page＝null时，返回全部的课程数据。课程查询接口查询本校开设的全部课程，为简单操作起见，课程设置时不关联学期，如果需要关联学期，则需要配置课程时需要按学期配置

> [课程查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/course/all＝1&page=[]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
	- page    ：page为分页的页面值，当page为空时，返回所有课程。每个分页返回20条数 
	- all     ：all＝0，或者为空，仅仅返回有效数据，all＝1，返回全部数据
Response:
    - `status`：0->is OK 
                11->token is invalid
                12->token is timeout
                13->Illegal interface calls, not power use interface
    - `course`: 学科课程内容JSON
    - `count` : 学科课程总数
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data": {
        "page": "0",   #0 - 全部数据，其他是对应的分页号
        "count": "3",
        "course": [
            {
                "course_id": "2",
                "course_n": "数学",
                "status": "1"   #正常 ＝ 0，停用 ＝ 1，当all＝1时才返回
            },
            {
                "course_id": "1",
                "course_n": "语文",
                "status": "0"   #正常 ＝ 0，停用 ＝ 1，当all＝1时才返回
            },
            {
                "course_id": "3",
                "course_n": "化学"
            }
        ]
    }
}
```

#### 4.2学校课程修改接口
> 学校课程修改接口可以修改学校课程的名称，也可以删除制定的课程，或者停用制定的课程，或者对停用的课程重新启用

> [学校课程修改接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updacour/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - course_id：   需要修改的课程id
    - course_name： 需要修改的名称名称，仅在变更名字时有效
    - type：        操作类型，0-变更名称 1-删除 2-停用 3-启用
示例：
{
    "course_id":"4",
    "course_name":"代数",
    "type": "0"
}
Response:
    - `status`：0->is OK
                1->变更名称，名称不能为空
                2->无法删除，已经使用的课程无法删除
                3->已经停用的无法再次停用
                4->未停用的无法启用
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

### 5. 班级设定页面接口
#### 5.1学校班级查询接口
> 学校班级查询接口返回了学校当前指定的学期上设置的班级列表，带分页请求，当page＝null时，返回全部的班级数据。为简单操作起见，班级查询时可直接查询班级对应的作息模版，以及班级对应的课程和任课老师情况（另：是否取消班级停用的状态？）

> [学校班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/classbase/t=[team]&all＝1&page=[]&type=[0]&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - term    ：查询的学期，如"2016-2017-1"
    - page    ：page为分页的页面值，当page为空时，返回所有课程。每个分页返回20条数 
    - all     ：all＝0，或者为空，仅仅返回有效数据，all＝1，返回全部数据
    - type    ：type＝0，或者无参参数仅仅返回班级基本数据，type＝1，带班级课程及任课老师数据
Response:
    - `status`：0->is OK 
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - `calss`：学科课程内容JSON
    - `count`：总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
    "page":"0",   #0-全部班级，其他为分页显示，每页20个班级
        "now":"2016-2017-1",
        "count":"2",
        "class": [
            {
                "name":"高三一班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "is_stop":"0",   #0-正常 1-停用
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽",
                        "course_id": "1",
                        "course_n": "语文"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    }
                ]
            },
            {
                "name":"高三二班",
                "cid":"234",
                "work_id":"1", #work_id为作息模板的编号
                "is_stop":"0",   #0-正常 1-停用
                "base": [
                    {
                        "tid": "3434",
                        "tname": "张高丽"
                    },
                    {
                        "tid": "2334",
                        "tname": "高山",
                        "course_id": "2",
                        "course_n": "数学"
                    },
                    {
                        "course_id": "4",
                        "course_n": "化学"
                    }
                ]
            }
        ]
    }
}
```

#### 5.2学校班级新增接口
> 学校班级新增接口可以新增学校班级

> [学校班级新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addclass/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - term：        当前学期ID
    - intime：      入学时间
    - count：       班级数量
    - g_name：      年级标签
示例：
{
    "term":"2016-2017-1",
    "intime":"2016",
    "count": "3"，
    "g_name": "高一"
}
Response:
    - `status`：0->is OK
                1->建立班级失败，无权使用
                2->建立班级失败，班级重复
                3->建立班级的学期已完结，无新增学期
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

#### 5.3学校班级修改接口
> 学校班级修改接口可以修改学校班级的状态，主要是班级标签，可以删除班级（如果该班级未被使用的话），停用班级（功能取消？），luodibashi：沟通后无班级停用功能；（2016-7-14）

> [学校班级修改接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/updaclass/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - term:         班级入学的学期标示
    - class_id：    需要修改的班级ID
    - label1：      标签1内容
    - label2：      标签2内容
    - type：        操作类型，0-变更名称 1-删除
示例：
{
    "class_id":"1234",
    "term":"2016-2017-1",
    "lable1":"2016",   ＃当type＝1时，可以为空
    "label2": "3"，   ＃当type＝1时，可以为空
    "type": "0"
}
Response:
    - `status`：0->is OK
                1->修改标签失败，标签为空，标签无效
                2->删除班级失败，班级已经使用无法删除
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

### 6. 学校作息模版设置页面接口
#### 6.1 班级作息模版查询接口
> 班级作息模版查询接口返回了学校当前指定的每个班级使用的作息时间模版情况
 
>  [班级zuo xi查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/workclass/&token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无
Response:
    - `status`：0->is OK 
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - `workcalss`：学科课程内容JSON
    - `count`：总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
	    "workclass": [
            {
                "work_id":"123",
                "work_name","毕业班作息模版",
                "base": [
                    {
                        "class_id": "234",
                        "trem":"2016-2017-1",   #当前的学期
                        "label1": "高三",
                        "label2": "1班"
                    },
                    {
                        "class_id": "236",
                        "trem":"2016-2017-1",   #当前的学期
                        "label1": "高三",
                        "label2": "2班"
                    },
                    {
                        "class_id": "238",
                        "trem":"2016-2017-1",   #当前的学期
                        "label1": "高三",
                        "label2": "3班"
                    }
                ]
            },
            {
                "work_id":"124",
                "work_name","普通班作息模版",
                "base": [
                    {
                        "class_id": "234",
                        "trem":"2016-2017-1",   #当前的学期
                        "label1": "高三",
                        "label2": "1班"
                    },
                    {
                        "class_id": "236",
                        "trem":"2016-2017-1",   #当前的学期
                        "label1": "高三",
                        "label2": "2班"
                    }
                ]
            }
        ]
    }
}
```

#### 6.2 学校作息模版查询接口
> 学校班级查询接口返回了学校当前指定的学期上设置的班级列表，带分页请求，当page＝null时，返回全部的班级数据。为简单操作起见，班级查询时可直接查询班级对应的作息模版，以及班级对应的课程和任课老师情况（另：是否取消班级停用的状态？）

> [学校班级查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/schoolwork/token=[token]
Method:     GET
Header:     Content-type:application/json
Parameter:
    - 无    ：
Response:
    - `status`：0->is OK 
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - `schoolwork`：学校作息模版JSON
    - `count`：总数
```

> **返回结果示例：**

``` json
{
    "staus": 0,
    "data":{
        "count":"2",
        "class": [
            {
                "work_id":"124",
                "work_name","普通班作息模版"
            },
            {
                "work_id":"123",
                "work_name","毕业班作息模版"
            }
        ]
    }
}
```

#### 6.3 作息模板数据查询
> 作息模板设置用于查询学校设置了那些作息模板

> [作息模板查询接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/worktime/work=[work_id]&token=[token]
Method:     GET
Header: Content-type:application/json
Parameter:
    - work : work_id为需要查询的作息模板id,当work_id为空时返回所有模板数据
Response:
    - `status`：    0->is OK 
                    11->token is invalid
                    12->token is timeout
                    13->Illegal interface calls, not power use interface
    - `worktime`:   作息模板内容JSON
```

> **返回结果示例：**
``` json
{
    "status": 0,
    "data": {
        "worktime":[
            {
                "name":"作息模板一",
                "work_id":"1", #work_id为作息模板的编号
                "base": [
                    {
                        "sch_id": "1",
                        "quantum": "早晨",
                        "stime": "07:00",
                        "etime": "08:00"
                    },
                    {
                        "sch_id": "2",
                        "quantum": "上午一",
                        "stime": "08:00",
                        "etime": "08:45"
                    },
                    {
                        "sch_id": "3",
                        "quantum": "上午二",
                        "stime": "08:88",
                        "etime": "09:40"
                    },
                    {
                        "sch_id": "4",
                        "quantum": "上午三",
                        "stime": "10:00",
                        "etime": "10:45"
                    },
                    {
                        "sch_id": "5",
                        "quantum": "上午四",
                        "stime": "10:55",
                        "etime": "11:40"
                    },
                    {
                        "sch_id": "6",
                        "quantum": "下午一",
                        "stime": "14:00",
                        "etime": "14:45"
                    },
                    {
                        "sch_id": "7",
                        "quantum": "下午二",
                        "stime": "14:55",
                        "etime": "15:40"
                    }
                ]
            },
            {
                "name":"作息模板二",
                "work_id":"2", #word_id为作息模板的编号
                "base": [
                    {
                        "sch_id": "1",
                        "quantum": "早晨",
                        "stime": "07:00",
                        "etime": "08:00"
                    },
                    {
                        "sch_id": "2",
                        "quantum": "上午一",
                        "stime": "08:00",
                        "etime": "08:45"
                    },
                    {
                        "sch_id": "3",
                        "quantum": "上午二",
                        "stime": "08:88",
                        "etime": "09:40"
                    },
                    {
                        "sch_id": "4",
                        "quantum": "上午三",
                        "stime": "10:00",
                        "etime": "10:45"
                    },
                    {
                        "sch_id": "5",
                        "quantum": "上午四",
                        "stime": "10:55",
                        "etime": "11:40"
                    }
                ]
            }
        ]
    }
}
```

#### 6.4 学校作息模版新增接口
> 学校作息模版新增接口可以新增学校作息模版

> [学校作息模版新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addwork/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
	- work_name：   模版名称
示例：
{
    "work_name":"高中毕业班作息"
}
Response:
    - `status`：0->is OK
                1->建立模版失败，无权使用
                2->建立模版失败，名称重复
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

#### 6.5 学校作息模版删除接口
> 学校作息模版删除接口可以删除学校作息模版

> [学校作息模版删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/delwork/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
	- work_id：   作息模版id
示例：
{
    "work_id":"123"
}
Response:
    - `status`：0->is OK
                1->删除模版失败，无权使用
                2->删除模版失败，无此模版编号
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

#### 6.6 作息模版详情新增接口
> 作息模版详情新增接口可以新增指定模版的详细条目

> [作息模版详情新增接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/addworkbase/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - work_id:      需要新增详情对应的模版编号
    - sch_name：    新增详情的名称
    - sch_stage：   新增详情对应的时间段
    - sch_stime：   新增详情对应的起点时间
    - sch_etime：   新增详情对应的结束时间
示例：
{
    "work_id":"1234",
    "data":[
        {
            "sch_name":"早自习一",
            "sch_stage":"0",   ＃0-早晨 1-上午 2-中午 3-下午 4-傍晚 5-夜间
            "sch_stime":"07:00",
            "sch_etime":"08:00"
        },
        {
            "sch_name":"上午一",
            "sch_stage":"1",   ＃0-早晨 1-上午 2-中午 3-下午 4-傍晚 5-夜间
            "sch_stime":"08:00",
            "sch_etime":"09:00"
        }
    ]
}
Response:
    - `status`：0->is OK
                1->新增详情失败，无调用权利
                2->新增详情失败，无对应的work_id
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
    - 'sch_id'：返回插入的详情记录对应的id
```

> **返回结果示例：**

``` json
{
    "status": 0,
    "data":[
        {
            "sch_id":"14"
        },
        {
            "sch_id":"15"
        }
    ]
}
```

#### 6.7 作息模版详情删除接口
> 作息模版详情删除接口可以删除指定模版的详细条目

> [作息模版详情删除接口](http://api.xxx.com)需要使用Token验证查询者身份

``` json
Url:        /qxy/delworkbase/token=[token]
Method:     PUT
Header:     Content-type:application/json
Parameter:
    - work_id:      需要删除详情对应的模版编号
    - sch_id：      删除详情对应的id
示例：
{
    "work_id":"1234",
    "data":[
        {
            "sch_id":"123"
        },
        {
            "sch_id":"151"
        }
    ]
}
Response:
    - `status`：0->is OK
                1->删除详情失败，无调用权利
                2->删除详情失败，无对应的work_id
                3->删除详情失败，无对应的sch_id
               11->token is invalid
               12->token is timeout
               13->Illegal interface calls, not power use interface
```

> **返回结果示例：**

``` json
{
    "status": 0
}
```

